{"remainingRequest":"E:\\food\\blockchain-trace-pc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\food\\blockchain-trace-pc\\src\\views\\trace\\driver\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\food\\blockchain-trace-pc\\src\\views\\trace\\driver\\index.vue","mtime":1692021609277},{"path":"E:\\food\\blockchain-trace-pc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\food\\blockchain-trace-pc\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\food\\blockchain-trace-pc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\food\\blockchain-trace-pc\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBsaXN0RGVwdCwgZ2V0RGVwdCwgZGVsRGVwdCwgYWRkRGVwdCwgdXBkYXRlRGVwdCwgbGlzdERlcHRFeGNsdWRlQ2hpbGQgfSBmcm9tICdAL2FwaS9zeXN0ZW0vZGVwdCc7DQppbXBvcnQgeyBsaXN0VHJhbnNwb3J0LCBzYXZlQW5kVXBkYXRlVHJhbnNwb3J0SW5mb1RvRGIgLHVwZGF0ZVRyYW5zcG9ydFN0YXR1c30gZnJvbSAnLi4vLi4vLi4vYXBpL3RyYWNlL2RyaXZlcic7DQppbXBvcnQgVHJlZXNlbGVjdCBmcm9tICdAcmlvcGhhZS92dWUtdHJlZXNlbGVjdCc7DQppbXBvcnQgJ0ByaW9waGFlL3Z1ZS10cmVlc2VsZWN0L2Rpc3QvdnVlLXRyZWVzZWxlY3QuY3NzJzsNCmltcG9ydCB7IGZvcm1hdERhdGUgfSBmcm9tICcuLi8uLi8uLi91dGlscy9pbmRleC5qcyc7DQpleHBvcnQgZGVmYXVsdCB7DQoJbmFtZTogJ0RlcHQnLA0KCWNvbXBvbmVudHM6IHsgVHJlZXNlbGVjdCB9LA0KCWRhdGEoKSB7DQoJCXJldHVybiB7DQoJCQlub3RpY2VEZXRhaURpYWxvZzogZmFsc2UsDQoJCQkvLyDpga7nvanlsYINCgkJCWxvYWRpbmc6IHRydWUsDQoJCQkvLyDmmL7npLrmkJzntKLmnaHku7YNCgkJCXNob3dTZWFyY2g6IHRydWUsDQoJCQkvLyDooajmoLzmoJHmlbDmja4NCgkJCWRlcHRMaXN0OiBbXSwNCgkJCS8vIOmDqOmXqOagkemAiemhuQ0KCQkJZGVwdE9wdGlvbnM6IFtdLA0KCQkJLy8g5by55Ye65bGC5qCH6aKYDQoJCQl0aXRsZTogJycsDQoJCQkvLyDmmK/lkKbmmL7npLrlvLnlh7rlsYINCgkJCW9wZW46IGZhbHNlLA0KCQkJLy8g54q25oCB5pWw5o2u5a2X5YW4DQoJCQlzdGF0dXNPcHRpb25zOiBbXSwNCgkJCS8vIOafpeivouWPguaVsA0KCQkJcXVlcnlQYXJhbXM6IHsNCgkJCQlkZXB0TmFtZTogdW5kZWZpbmVkLA0KCQkJCXN0YXR1czogdW5kZWZpbmVkDQoJCQl9LA0KCQkJLy8g6KGo5Y2V5Y+C5pWwDQoJCQlmb3JtOiB7fSwNCg0KCQkJdHJhbnNwb3J0TGlzdDogW10sDQoJCQljaXR5RGV0YWlsOiAnJywNCgkJCWxuZzogTnVtYmVyLA0KCQkJbGF0OiBOdW1iZXINCgkJfTsNCgl9LA0KCWNyZWF0ZWQoKSB7DQoJCXRoaXMuZ2V0TGlzdCgpOw0KCX0sDQoNCgltb3VudGVkKCkgew0KCQlBTWFwLnBsdWdpbignQU1hcC5HZW9sb2NhdGlvbicsIGZ1bmN0aW9uKCkgew0KCQkJdmFyIGdlb2xvY2F0aW9uID0gbmV3IEFNYXAuR2VvbG9jYXRpb24oew0KCQkJCS8vIOaYr+WQpuS9v+eUqOmrmOeyvuW6puWumuS9je+8jOm7mOiupO+8mnRydWUNCgkJCQllbmFibGVIaWdoQWNjdXJhY3k6IHRydWUsDQoJCQkJLy8g6K6+572u5a6a5L2N6LaF5pe25pe26Ze077yM6buY6K6k77ya5peg56m35aSnDQoJCQkJdGltZW91dDogMTAwMDAsDQoJCQkJLy8g5a6a5L2N5oyJ6ZKu55qE5YGc6Z2g5L2N572u55qE5YGP56e76YeP77yM6buY6K6k77yaUGl4ZWwoMTAsIDIwKQ0KCQkJCWJ1dHRvbk9mZnNldDogbmV3IEFNYXAuUGl4ZWwoMTAsIDIwKSwNCgkJCQkvLyAg5a6a5L2N5oiQ5Yqf5ZCO6LCD5pW05Zyw5Zu+6KeG6YeO6IyD5Zu05L2/5a6a5L2N5L2N572u5Y+K57K+5bqm6IyD5Zu06KeG6YeO5YaF5Y+v6KeB77yM6buY6K6k77yaZmFsc2UNCgkJCQl6b29tVG9BY2N1cmFjeTogdHJ1ZSwNCgkJCQkvLyAg5a6a5L2N5oyJ6ZKu55qE5o6S5pS+5L2N572uLCAgUkLooajnpLrlj7PkuIsNCgkJCQlidXR0b25Qb3NpdGlvbjogJ1JCJw0KCQkJfSk7DQoJCQlnZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oKTsNCgkJCUFNYXAuZXZlbnQuYWRkTGlzdGVuZXIoZ2VvbG9jYXRpb24sICdjb21wbGV0ZScsIG9uQ29tcGxldGUpOw0KCQkJQU1hcC5ldmVudC5hZGRMaXN0ZW5lcihnZW9sb2NhdGlvbiwgJ2Vycm9yJywgb25FcnJvcik7DQoJCQlmdW5jdGlvbiBvbkNvbXBsZXRlKGRhdGEpIHsNCgkJCQl0aGlzLmNpdHlEZXRhaWwgPSBkYXRhLmFkZHJlc3NDb21wb25lbnQucHJvdmluY2UgKyBkYXRhLmFkZHJlc3NDb21wb25lbnQuY2l0eSArIGRhdGEuYWRkcmVzc0NvbXBvbmVudC5kaXN0cmljdCArIGRhdGEuYWRkcmVzc0NvbXBvbmVudC50b3duc2hpcDsNCgkJCQl0aGlzLmxuZyA9IGRhdGEucG9zaXRpb24ubG5nOw0KCQkJCXRoaXMubGF0ID0gZGF0YS5wb3NpdGlvbi5sYXQ7DQoJCQkJY29uc3Qgc3RyID0gW107DQoJCQkJc3RyLnB1c2goZGF0YS5wb3NpdGlvbi5sbmcpOw0KCQkJCXN0ci5wdXNoKGRhdGEucG9zaXRpb24ubGF0KTsNCgkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG5nJykuaW5uZXJIVE1MID0gZGF0YS5wb3NpdGlvbi5sbmc7DQoJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xhdCcpLmlubmVySFRNTCA9IGRhdGEucG9zaXRpb24ubGF0Ow0KCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXAnKS5pbm5lckhUTUwgPSB0aGlzLmNpdHlEZXRhaWw7DQoJCQl9DQoJCQlmdW5jdGlvbiBvbkVycm9yKGRhdGEpIHsNCgkJCQljb25zb2xlLmxvZygn5a6a5L2N6ZSZ6K+vICAgJyArIEpTT04uc3RyaW5naWZ5KGRhdGEpKTsNCgkJCX0NCgkJfSk7DQoJfSwNCg0KCW1ldGhvZHM6IHsNCgkJaXNPayhyb3cpew0KCQkJY29uc3QgdHJhbnNwb3J0QXJyYXkgPSBbXTsNCgkJCWNvbnN0IGlkID0gbmV3IHRoaXMuJHNub3dGbGFrZUlkKCkuZ2VuZXJhdGUoKTsNCgkJCXRyYW5zcG9ydEFycmF5LnB1c2goaWQpOw0KCQkJdHJhbnNwb3J0QXJyYXkucHVzaChpZCk7DQoJCQl0cmFuc3BvcnRBcnJheS5wdXNoKHRoaXMuJHN0b3JlLmdldHRlcnMubmFtZSk7DQoJCQl0cmFuc3BvcnRBcnJheS5wdXNoKHRoaXMuJHN0b3JlLmdldHRlcnMubmlja05hbWUpOw0KCQkJdHJhbnNwb3J0QXJyYXkucHVzaCh0aGlzLiRzdG9yZS5nZXR0ZXJzLnBob25lbnVtYmVyKTsNCgkJCXRyYW5zcG9ydEFycmF5LnB1c2godGhpcy4kc3RvcmUuZ2V0dGVycy5kZXB0TmFtZSk7DQoJCQl0cmFuc3BvcnRBcnJheS5wdXNoKGZvcm1hdERhdGUobmV3IERhdGUoKSkpOw0KCQkJdHJhbnNwb3J0QXJyYXkucHVzaChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGlwJykuaW5uZXJIVE1MKTsNCgkJCXRyYW5zcG9ydEFycmF5LnB1c2gocm93LmNyb3BzSWQpOw0KCQkJdHJhbnNwb3J0QXJyYXkucHVzaCgn57uI54K556uZJyk7DQoJCQl0aGlzLiRjb25maXJtKCfmmK/lkKbnoa7orqTphY3pgIHlrozmr5UnLCAn6YWN6YCBJywgew0KCQkJCWNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCgkJCQljYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywNCgkJCQl0eXBlOiAnd2FybmluZycNCgkJCX0pDQoJCQkJLnRoZW4oKCkgPT4gew0KCQkJCQl0aGlzLiRodHRwQmxvY2sNCgkJCQkJCS5wb3N0KHRoaXMuJGh0dHBVcmwgKyAnL2RyaXZlcmFwaS9jcmVhdGVUcmFuc3BvcnQnLCB7IHRyYW5zcG9ydEFycmF5OiB0cmFuc3BvcnRBcnJheSB9KQ0KCQkJCQkJLnRoZW4ocmVzID0+IHsNCgkJCQkJCQlpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7DQoJCQkJCQkJCXRoaXMubXNnU3VjY2Vzcygn5pWw5o2u5LiK6ZO+5oiQ5YqfJyk7DQoJCQkJCQkJCXRoaXMuZ3Jvd0RpYWxvZyA9IGZhbHNlOw0KCQkJCQkJCQljb25zdCB0cmFuc3BvcnRJbmZvID0gew0KCQkJCQkJCQkJbG5nOiBOdW1iZXIoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xuZycpLmlubmVySFRNTCksDQoJCQkJCQkJCQlsYXQ6IE51bWJlcihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGF0JykuaW5uZXJIVE1MKSwNCgkJCQkJCQkJCWNyb3BzSWQ6IHJvdy5jcm9wc0lkLA0KCQkJCQkJCQkJc3RhdHVzOiAyLA0KCQkJCQkJCQkJaWQ6IHJvdy5pZCwNCgkJCQkJCQkJCW91dEZhY3RvcnlTdGF0dXM6MA0KCQkJCQkJCQl9Ow0KCQkJCQkJCQlzYXZlQW5kVXBkYXRlVHJhbnNwb3J0SW5mb1RvRGIodHJhbnNwb3J0SW5mbykNCgkJCQkJCQkJCS50aGVuKHJlcyA9PiB7DQoJCQkJCQkJCQkJdGhpcy5nZXRMaXN0KCk7DQoJCQkJCQkJCQl9KQ0KCQkJCQkJCQkJLmNhdGNoKGVyciA9PiB7DQoNCgkJCQkJCQkJCX0pOw0KCQkJCQkJCX0NCgkJCQkJCX0pDQoJCQkJCQkuY2F0Y2goZXJyID0+IHsNCgkJCQkJCQl0aGlzLm1zZ0Vycm9yKCflrZjlgqjlvILluLggJyArIGVycik7DQoJCQkJCQl9KTsNCgkJCQkJdGhpcy4kbWVzc2FnZSh7DQoJCQkJCQl0eXBlOiAnc3VjY2VzcycsDQoJCQkJCQltZXNzYWdlOiAn6YWN6YCB5oiQ5YqfIScNCgkJCQkJfSk7DQoJCQkJfSkNCgkJCQkuY2F0Y2goKCkgPT4gew0KCQkJCQl0aGlzLiRtZXNzYWdlKHsNCgkJCQkJCXR5cGU6ICdpbmZvJywNCgkJCQkJCW1lc3NhZ2U6ICflj5bmtognDQoJCQkJCX0pOw0KCQkJCX0pOw0KCQl9LA0KDQoJCXRyYW5zcG9ydExvY2F0aW9uKHJvdykgew0KCQkJY29uc3QgdHJhbnNwb3J0QXJyYXkgPSBbXTsNCgkJCWNvbnN0IGlkID0gbmV3IHRoaXMuJHNub3dGbGFrZUlkKCkuZ2VuZXJhdGUoKTsNCgkJCXRyYW5zcG9ydEFycmF5LnB1c2goaWQpOw0KCQkJdHJhbnNwb3J0QXJyYXkucHVzaChpZCk7DQoJCQl0cmFuc3BvcnRBcnJheS5wdXNoKHRoaXMuJHN0b3JlLmdldHRlcnMubmFtZSk7DQoJCQl0cmFuc3BvcnRBcnJheS5wdXNoKHRoaXMuJHN0b3JlLmdldHRlcnMubmlja05hbWUpOw0KCQkJdHJhbnNwb3J0QXJyYXkucHVzaCh0aGlzLiRzdG9yZS5nZXR0ZXJzLnBob25lbnVtYmVyKTsNCgkJCXRyYW5zcG9ydEFycmF5LnB1c2godGhpcy4kc3RvcmUuZ2V0dGVycy5kZXB0TmFtZSk7DQoJCQl0cmFuc3BvcnRBcnJheS5wdXNoKGZvcm1hdERhdGUobmV3IERhdGUoKSkpOw0KCQkJdHJhbnNwb3J0QXJyYXkucHVzaChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGlwJykuaW5uZXJIVE1MKTsNCgkJCXRyYW5zcG9ydEFycmF5LnB1c2gocm93LmNyb3BzSWQpOw0KCQkJdHJhbnNwb3J0QXJyYXkucHVzaCgn5Lit6YCU5a6a5L2NJyk7DQoJCQl0aGlzLiRjb25maXJtKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXAnKS5pbm5lckhUTUwsICflrprkvY0nLCB7DQoJCQkJY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLA0KCQkJCWNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KCQkJCXR5cGU6ICd3YXJuaW5nJw0KCQkJfSkNCgkJCQkudGhlbigoKSA9PiB7DQoJCQkJCXRoaXMuJGh0dHBCbG9jaw0KCQkJCQkJLnBvc3QodGhpcy4kaHR0cFVybCArICcvZHJpdmVyYXBpL2NyZWF0ZVRyYW5zcG9ydCcsIHsgdHJhbnNwb3J0QXJyYXk6IHRyYW5zcG9ydEFycmF5IH0pDQoJCQkJCQkudGhlbihyZXMgPT4gew0KCQkJCQkJCWlmIChyZXMuc3RhdHVzID09PSAyMDApIHsNCgkJCQkJCQkJdGhpcy5tc2dTdWNjZXNzKCfmlbDmja7kuIrpk77miJDlip8nKTsNCgkJCQkJCQkJdGhpcy5ncm93RGlhbG9nID0gZmFsc2U7DQoJCQkJCQkJCWNvbnN0IHRyYW5zcG9ydEluZm8gPSB7DQoJCQkJCQkJCQlsbmc6IE51bWJlcihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG5nJykuaW5uZXJIVE1MKSwNCgkJCQkJCQkJCWxhdDogTnVtYmVyKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYXQnKS5pbm5lckhUTUwpLA0KCQkJCQkJCQkJY3JvcHNJZDogcm93LmNyb3BzSWQsDQoJCQkJCQkJCQlzdGF0dXM6IDEsDQoJCQkJCQkJCX07DQoJCQkJCQkJCXNhdmVBbmRVcGRhdGVUcmFuc3BvcnRJbmZvVG9EYih0cmFuc3BvcnRJbmZvKQ0KCQkJCQkJCQkJLnRoZW4ocmVzID0+IHsNCgkJCQkJCQkJCQl0aGlzLmdldExpc3QoKTsNCgkJCQkJCQkJCX0pDQoJCQkJCQkJCQkuY2F0Y2goZXJyID0+IHsNCg0KCQkJCQkJCQkJfSk7DQoJCQkJCQkJfQ0KCQkJCQkJfSkNCgkJCQkJCS5jYXRjaChlcnIgPT4gew0KCQkJCQkJCXRoaXMubXNnRXJyb3IoJ+WtmOWCqOW8guW4uCAnICsgZXJyKTsNCgkJCQkJCX0pOw0KDQoJCQkJfSkNCgkJCQkuY2F0Y2goKCkgPT4gew0KCQkJCQl0aGlzLiRtZXNzYWdlKHsNCgkJCQkJCXR5cGU6ICdpbmZvJywNCgkJCQkJCW1lc3NhZ2U6ICflj5bmtojlrprkvY0nDQoJCQkJCX0pOw0KCQkJCX0pOw0KCQl9LA0KCQkvKioNCgkJICogQHBhcmFtIHtPYmplY3R9IHJvd+W8gOWni+mFjemAgQ0KCQkgKi8NCgkJc3RhcnRUcmFuc3BvcnQocm93KSB7DQoJCQljb25zdCB0cmFuc3BvcnRBcnJheSA9IFtdOw0KCQkJY29uc3QgaWQgPSBuZXcgdGhpcy4kc25vd0ZsYWtlSWQoKS5nZW5lcmF0ZSgpOw0KCQkJdHJhbnNwb3J0QXJyYXkucHVzaChpZCk7DQoJCQl0cmFuc3BvcnRBcnJheS5wdXNoKGlkKTsNCgkJCXRyYW5zcG9ydEFycmF5LnB1c2godGhpcy4kc3RvcmUuZ2V0dGVycy5uYW1lKTsNCgkJCXRyYW5zcG9ydEFycmF5LnB1c2godGhpcy4kc3RvcmUuZ2V0dGVycy5uaWNrTmFtZSk7DQoJCQl0cmFuc3BvcnRBcnJheS5wdXNoKHRoaXMuJHN0b3JlLmdldHRlcnMucGhvbmVudW1iZXIpOw0KCQkJdHJhbnNwb3J0QXJyYXkucHVzaCh0aGlzLiRzdG9yZS5nZXR0ZXJzLmRlcHROYW1lKTsNCgkJCXRyYW5zcG9ydEFycmF5LnB1c2goZm9ybWF0RGF0ZShuZXcgRGF0ZSgpKSk7DQoJCQl0cmFuc3BvcnRBcnJheS5wdXNoKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXAnKS5pbm5lckhUTUwpOw0KCQkJdHJhbnNwb3J0QXJyYXkucHVzaChyb3cuY3JvcHNJZCk7DQoJCQl0cmFuc3BvcnRBcnJheS5wdXNoKCflp4vlj5HlnLAnKTsNCgkJCXRoaXMuJGNvbmZpcm0oJ+aYr+WQpuW8gOWni+i/kOmAgei0p+eJqScsICfmj5DnpLonLCB7DQoJCQkJY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLA0KCQkJCWNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KCQkJCXR5cGU6ICd3YXJuaW5nJw0KCQkJfSkNCgkJCQkudGhlbigoKSA9PiB7DQoJCQkJCXRoaXMuJGh0dHBCbG9jaw0KCQkJCQkJLnBvc3QodGhpcy4kaHR0cFVybCArICcvZHJpdmVyYXBpL2NyZWF0ZVRyYW5zcG9ydCcsIHsgdHJhbnNwb3J0QXJyYXk6IHRyYW5zcG9ydEFycmF5IH0pDQoJCQkJCQkudGhlbihyZXMgPT4gew0KCQkJCQkJCWlmIChyZXMuc3RhdHVzID09PSAyMDApIHsNCgkJCQkJCQkJdGhpcy5tc2dTdWNjZXNzKCfmlbDmja7kuIrpk77miJDlip8nKTsNCgkJCQkJCQkJdGhpcy5ncm93RGlhbG9nID0gZmFsc2U7DQoJCQkJCQkJCWNvbnN0IHRyYW5zcG9ydEluZm8gPSB7DQoJCQkJCQkJCQlsbmc6IE51bWJlcihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG5nJykuaW5uZXJIVE1MKSwNCgkJCQkJCQkJCWxhdDogTnVtYmVyKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYXQnKS5pbm5lckhUTUwpLA0KCQkJCQkJCQkJY3JvcHNJZDogcm93LmNyb3BzSWQsDQoJCQkJCQkJCQlpZDogcm93LmlkLA0KCQkJCQkJCQkJc3RhdHVzOiAxLA0KCQkJCQkJCQl9Ow0KCQkJCQkJCQlzYXZlQW5kVXBkYXRlVHJhbnNwb3J0SW5mb1RvRGIodHJhbnNwb3J0SW5mbykNCgkJCQkJCQkJCS50aGVuKHJlcyA9PiB7DQoNCgkJCQkJCQkJCQl0aGlzLmdldExpc3QoKTsNCgkJCQkJCQkJCX0pDQoJCQkJCQkJCQkuY2F0Y2goZXJyID0+IHsNCg0KCQkJCQkJCQkJfSk7DQoJCQkJCQkJfQ0KCQkJCQkJfSkNCgkJCQkJCS5jYXRjaChlcnIgPT4gew0KCQkJCQkJCXRoaXMubXNnRXJyb3IoJ+WtmOWCqOW8guW4uCAnICsgZXJyKTsNCgkJCQkJCX0pOw0KCQkJCQl0aGlzLiRtZXNzYWdlKHsNCgkJCQkJCXR5cGU6ICdzdWNjZXNzJywNCgkJCQkJCW1lc3NhZ2U6ICflvIDlp4vov5DpgIEhJw0KCQkJCQl9KTsNCgkJCQl9KQ0KCQkJCS5jYXRjaCgoKSA9PiB7DQoJCQkJCXRoaXMuJG1lc3NhZ2Uoew0KCQkJCQkJdHlwZTogJ2luZm8nLA0KCQkJCQkJbWVzc2FnZTogJ+W3suWPlua2iOi/kOmAgScNCgkJCQkJfSk7DQoJCQkJfSk7DQoJCX0sDQoNCgkJZ2V0TGlzdCgpIHsNCgkJCWxpc3RUcmFuc3BvcnQodGhpcy4kc3RvcmUuZ2V0dGVycy5uYW1lKS50aGVuKHJlcyA9PiB7DQoJCQkJdGhpcy50cmFuc3BvcnRMaXN0ID0gcmVzLmRhdGE7DQoJCQl9KTsNCgkJfSwNCgkJLyoqIOi9rOaNoumDqOmXqOaVsOaNrue7k+aehCAqLw0KCQlub3JtYWxpemVyKG5vZGUpIHsNCgkJCWlmIChub2RlLmNoaWxkcmVuICYmICFub2RlLmNoaWxkcmVuLmxlbmd0aCkgew0KCQkJCWRlbGV0ZSBub2RlLmNoaWxkcmVuOw0KCQkJfQ0KCQkJcmV0dXJuIHsNCgkJCQlpZDogbm9kZS5kZXB0SWQsDQoJCQkJbGFiZWw6IG5vZGUuZGVwdE5hbWUsDQoJCQkJY2hpbGRyZW46IG5vZGUuY2hpbGRyZW4NCgkJCX07DQoJCX0sDQoJCS8vIOWtl+WFuOeKtuaAgeWtl+WFuOe/u+ivkQ0KCQlzdGF0dXNGb3JtYXQocm93LCBjb2x1bW4pIHsNCgkJCXJldHVybiB0aGlzLnNlbGVjdERpY3RMYWJlbCh0aGlzLnN0YXR1c09wdGlvbnMsIHJvdy5zdGF0dXMpOw0KCQl9LA0KCQkvLyDlj5bmtojmjInpkq4NCgkJY2FuY2VsKCkgew0KCQkJdGhpcy5vcGVuID0gZmFsc2U7DQoJCQl0aGlzLnJlc2V0KCk7DQoJCX0sDQoJCS8vIOihqOWNlemHjee9rg0KCQlyZXNldCgpIHsNCgkJCXRoaXMuZm9ybSA9IHsNCgkJCQlkZXB0SWQ6IHVuZGVmaW5lZCwNCgkJCQlwYXJlbnRJZDogdW5kZWZpbmVkLA0KCQkJCWRlcHROYW1lOiB1bmRlZmluZWQsDQoJCQkJb3JkZXJOdW06IHVuZGVmaW5lZCwNCgkJCQlsZWFkZXI6IHVuZGVmaW5lZCwNCgkJCQlwaG9uZTogdW5kZWZpbmVkLA0KCQkJCWVtYWlsOiB1bmRlZmluZWQsDQoJCQkJc3RhdHVzOiAnMCcNCgkJCX07DQoJCQl0aGlzLnJlc2V0Rm9ybSgnZm9ybScpOw0KCQl9LA0KCQkvKiog5pCc57Si5oyJ6ZKu5pON5L2cICovDQoJCWhhbmRsZVF1ZXJ5KCkgew0KCQkJdGhpcy5nZXRMaXN0KCk7DQoJCX0sDQoJCS8qKiDph43nva7mjInpkq7mk43kvZwgKi8NCgkJcmVzZXRRdWVyeSgpIHsNCgkJCXRoaXMucmVzZXRGb3JtKCdxdWVyeUZvcm0nKTsNCgkJCXRoaXMuaGFuZGxlUXVlcnkoKTsNCgkJfSwNCgkJLyoqIOaWsOWinuaMiemSruaTjeS9nCAqLw0KCQloYW5kbGVBZGQocm93KSB7DQoJCQl0aGlzLnJlc2V0KCk7DQoJCQlpZiAocm93ICE9IHVuZGVmaW5lZCkgew0KCQkJCXRoaXMuZm9ybS5wYXJlbnRJZCA9IHJvdy5kZXB0SWQ7DQoJCQl9DQoJCQl0aGlzLm9wZW4gPSB0cnVlOw0KCQkJdGhpcy50aXRsZSA9ICfmt7vliqDpg6jpl6gnOw0KCQkJbGlzdERlcHQoKS50aGVuKHJlc3BvbnNlID0+IHsNCgkJCQl0aGlzLmRlcHRPcHRpb25zID0gdGhpcy5oYW5kbGVUcmVlKHJlc3BvbnNlLmRhdGEsICdkZXB0SWQnKTsNCgkJCX0pOw0KCQl9LA0KCQkvKiog5L+u5pS55oyJ6ZKu5pON5L2cICovDQoJCWhhbmRsZVVwZGF0ZShyb3cpIHsNCgkJCXRoaXMucmVzZXQoKTsNCgkJCWdldERlcHQocm93LmRlcHRJZCkudGhlbihyZXNwb25zZSA9PiB7DQoJCQkJdGhpcy5mb3JtID0gcmVzcG9uc2UuZGF0YTsNCgkJCQl0aGlzLm9wZW4gPSB0cnVlOw0KCQkJCXRoaXMudGl0bGUgPSAn5L+u5pS56YOo6ZeoJzsNCgkJCX0pOw0KCQkJbGlzdERlcHRFeGNsdWRlQ2hpbGQocm93LmRlcHRJZCkudGhlbihyZXNwb25zZSA9PiB7DQoJCQkJdGhpcy5kZXB0T3B0aW9ucyA9IHRoaXMuaGFuZGxlVHJlZShyZXNwb25zZS5kYXRhLCAnZGVwdElkJyk7DQoJCQl9KTsNCgkJfSwNCgkJLyoqIOaPkOS6pOaMiemSriAqLw0KCQlzdWJtaXRGb3JtOiBmdW5jdGlvbigpIHsNCgkJCXRoaXMuJHJlZnNbJ2Zvcm0nXS52YWxpZGF0ZSh2YWxpZCA9PiB7DQoJCQkJaWYgKHZhbGlkKSB7DQoJCQkJCWlmICh0aGlzLmZvcm0uZGVwdElkICE9IHVuZGVmaW5lZCkgew0KCQkJCQkJdXBkYXRlRGVwdCh0aGlzLmZvcm0pLnRoZW4ocmVzcG9uc2UgPT4gew0KCQkJCQkJCWlmIChyZXNwb25zZS5jb2RlID09PSAyMDApIHsNCgkJCQkJCQkJdGhpcy5tc2dTdWNjZXNzKCfkv67mlLnmiJDlip8nKTsNCgkJCQkJCQkJdGhpcy5vcGVuID0gZmFsc2U7DQoJCQkJCQkJCXRoaXMuZ2V0TGlzdCgpOw0KCQkJCQkJCX0NCgkJCQkJCX0pOw0KCQkJCQl9IGVsc2Ugew0KCQkJCQkJYWRkRGVwdCh0aGlzLmZvcm0pLnRoZW4ocmVzcG9uc2UgPT4gew0KCQkJCQkJCWlmIChyZXNwb25zZS5jb2RlID09PSAyMDApIHsNCgkJCQkJCQkJdGhpcy5tc2dTdWNjZXNzKCfmlrDlop7miJDlip8nKTsNCgkJCQkJCQkJdGhpcy5vcGVuID0gZmFsc2U7DQoJCQkJCQkJCXRoaXMuZ2V0TGlzdCgpOw0KCQkJCQkJCX0NCgkJCQkJCX0pOw0KCQkJCQl9DQoJCQkJfQ0KCQkJfSk7DQoJCX0sDQoJCS8qKiDliKDpmaTmjInpkq7mk43kvZwgKi8NCgkJaGFuZGxlRGVsZXRlKHJvdykgew0KCQkJdGhpcy4kY29uZmlybSgn5piv5ZCm56Gu6K6k5Yig6Zmk5ZCN56ew5Li6IicgKyByb3cuZGVwdE5hbWUgKyAnIueahOaVsOaNrumhuT8nLCAn6K2m5ZGKJywgew0KCQkJCWNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCgkJCQljYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywNCgkJCQl0eXBlOiAnd2FybmluZycNCgkJCX0pDQoJCQkJLnRoZW4oZnVuY3Rpb24oKSB7DQoJCQkJCXJldHVybiBkZWxEZXB0KHJvdy5kZXB0SWQpOw0KCQkJCX0pDQoJCQkJLnRoZW4oKCkgPT4gew0KCQkJCQl0aGlzLmdldExpc3QoKTsNCgkJCQkJdGhpcy5tc2dTdWNjZXNzKCfliKDpmaTmiJDlip8nKTsNCgkJCQl9KQ0KCQkJCS5jYXRjaChmdW5jdGlvbigpIHt9KTsNCgkJfQ0KCX0NCn07DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/trace/driver","sourcesContent":["<template>\r\n\t<div class=\"app-container\">\r\n\t\t<el-divider>待处理业务</el-divider>\r\n\r\n\t\t<br />\r\n\t\t<el-table :data=\"transportList\">\r\n\t\t\t<el-table-column type=\"selection\" width=\"55\" align=\"center\" />\r\n\t\t\t<el-table-column label=\"货物编号\" prop=\"cropsId\" />\r\n\t\t\t<el-table-column label=\"通知人\" prop=\"farmerNickName\" />\r\n\t\t\t<el-table-column label=\"部门\" prop=\"farmerDept\" />\r\n\t\t\t<el-table-column label=\"时间\" prop=\"time\" />\r\n\t\t\t<el-table-column label=\"备注\" prop=\"remarks\" />\r\n\t\t\t<el-table-column label=\"状态\" prop=\"status\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-tag v-if=\"scope.row.status === 0\">未运输</el-tag>\r\n\t\t\t\t\t<el-tag v-if=\"scope.row.status === 1\">运输中</el-tag>\r\n\t\t\t\t\t<el-tag v-if=\"scope.row.status === 2\">运输完成</el-tag>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-button v-show=\"scope.row.status === 0\" size=\"mini\" type=\"text\" @click=\"startTransport(scope.row)\">开始配送</el-button>\r\n\t\t\t\t\t<el-button v-show=\"scope.row.status === 1\" size=\"mini\" type=\"text\" @click=\"transportLocation(scope.row)\">中途定位</el-button>\r\n\t\t\t\t\t<el-button v-show=\"scope.row.status === 1\" size=\"mini\" type=\"text\" @click=\"isOk(scope.row)\">配送完毕</el-button>\r\n<!--\t\t\t\t\t<el-button size=\"mini\" type=\"text\" @click=\"isOk(scope.row)\">物流追踪</el-button>-->\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t</el-table>\r\n\r\n\t\t<div v-show=\"false\" id=\"tip\"></div>\r\n\t\t<div v-show=\"false\" id=\"lng\"></div>\r\n\t\t<div v-show=\"false\" id=\"lat\"></div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { listDept, getDept, delDept, addDept, updateDept, listDeptExcludeChild } from '@/api/system/dept';\r\nimport { listTransport, saveAndUpdateTransportInfoToDb ,updateTransportStatus} from '../../../api/trace/driver';\r\nimport Treeselect from '@riophae/vue-treeselect';\r\nimport '@riophae/vue-treeselect/dist/vue-treeselect.css';\r\nimport { formatDate } from '../../../utils/index.js';\r\nexport default {\r\n\tname: 'Dept',\r\n\tcomponents: { Treeselect },\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tnoticeDetaiDialog: false,\r\n\t\t\t// 遮罩层\r\n\t\t\tloading: true,\r\n\t\t\t// 显示搜索条件\r\n\t\t\tshowSearch: true,\r\n\t\t\t// 表格树数据\r\n\t\t\tdeptList: [],\r\n\t\t\t// 部门树选项\r\n\t\t\tdeptOptions: [],\r\n\t\t\t// 弹出层标题\r\n\t\t\ttitle: '',\r\n\t\t\t// 是否显示弹出层\r\n\t\t\topen: false,\r\n\t\t\t// 状态数据字典\r\n\t\t\tstatusOptions: [],\r\n\t\t\t// 查询参数\r\n\t\t\tqueryParams: {\r\n\t\t\t\tdeptName: undefined,\r\n\t\t\t\tstatus: undefined\r\n\t\t\t},\r\n\t\t\t// 表单参数\r\n\t\t\tform: {},\r\n\r\n\t\t\ttransportList: [],\r\n\t\t\tcityDetail: '',\r\n\t\t\tlng: Number,\r\n\t\t\tlat: Number\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tthis.getList();\r\n\t},\r\n\r\n\tmounted() {\r\n\t\tAMap.plugin('AMap.Geolocation', function() {\r\n\t\t\tvar geolocation = new AMap.Geolocation({\r\n\t\t\t\t// 是否使用高精度定位，默认：true\r\n\t\t\t\tenableHighAccuracy: true,\r\n\t\t\t\t// 设置定位超时时间，默认：无穷大\r\n\t\t\t\ttimeout: 10000,\r\n\t\t\t\t// 定位按钮的停靠位置的偏移量，默认：Pixel(10, 20)\r\n\t\t\t\tbuttonOffset: new AMap.Pixel(10, 20),\r\n\t\t\t\t//  定位成功后调整地图视野范围使定位位置及精度范围视野内可见，默认：false\r\n\t\t\t\tzoomToAccuracy: true,\r\n\t\t\t\t//  定位按钮的排放位置,  RB表示右下\r\n\t\t\t\tbuttonPosition: 'RB'\r\n\t\t\t});\r\n\t\t\tgeolocation.getCurrentPosition();\r\n\t\t\tAMap.event.addListener(geolocation, 'complete', onComplete);\r\n\t\t\tAMap.event.addListener(geolocation, 'error', onError);\r\n\t\t\tfunction onComplete(data) {\r\n\t\t\t\tthis.cityDetail = data.addressComponent.province + data.addressComponent.city + data.addressComponent.district + data.addressComponent.township;\r\n\t\t\t\tthis.lng = data.position.lng;\r\n\t\t\t\tthis.lat = data.position.lat;\r\n\t\t\t\tconst str = [];\r\n\t\t\t\tstr.push(data.position.lng);\r\n\t\t\t\tstr.push(data.position.lat);\r\n\t\t\t\tdocument.getElementById('lng').innerHTML = data.position.lng;\r\n\t\t\t\tdocument.getElementById('lat').innerHTML = data.position.lat;\r\n\t\t\t\tdocument.getElementById('tip').innerHTML = this.cityDetail;\r\n\t\t\t}\r\n\t\t\tfunction onError(data) {\r\n\t\t\t\tconsole.log('定位错误   ' + JSON.stringify(data));\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tisOk(row){\r\n\t\t\tconst transportArray = [];\r\n\t\t\tconst id = new this.$snowFlakeId().generate();\r\n\t\t\ttransportArray.push(id);\r\n\t\t\ttransportArray.push(id);\r\n\t\t\ttransportArray.push(this.$store.getters.name);\r\n\t\t\ttransportArray.push(this.$store.getters.nickName);\r\n\t\t\ttransportArray.push(this.$store.getters.phonenumber);\r\n\t\t\ttransportArray.push(this.$store.getters.deptName);\r\n\t\t\ttransportArray.push(formatDate(new Date()));\r\n\t\t\ttransportArray.push(document.getElementById('tip').innerHTML);\r\n\t\t\ttransportArray.push(row.cropsId);\r\n\t\t\ttransportArray.push('终点站');\r\n\t\t\tthis.$confirm('是否确认配送完毕', '配送', {\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis.$httpBlock\r\n\t\t\t\t\t\t.post(this.$httpUrl + '/driverapi/createTransport', { transportArray: transportArray })\r\n\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\tif (res.status === 200) {\r\n\t\t\t\t\t\t\t\tthis.msgSuccess('数据上链成功');\r\n\t\t\t\t\t\t\t\tthis.growDialog = false;\r\n\t\t\t\t\t\t\t\tconst transportInfo = {\r\n\t\t\t\t\t\t\t\t\tlng: Number(document.getElementById('lng').innerHTML),\r\n\t\t\t\t\t\t\t\t\tlat: Number(document.getElementById('lat').innerHTML),\r\n\t\t\t\t\t\t\t\t\tcropsId: row.cropsId,\r\n\t\t\t\t\t\t\t\t\tstatus: 2,\r\n\t\t\t\t\t\t\t\t\tid: row.id,\r\n\t\t\t\t\t\t\t\t\toutFactoryStatus:0\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tsaveAndUpdateTransportInfoToDb(transportInfo)\r\n\t\t\t\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\t\t\t\tthis.getList();\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.catch(err => {\r\n\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\t\tthis.msgError('存储异常 ' + err);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\tmessage: '配送成功!'\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\t\tmessage: '取消'\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\ttransportLocation(row) {\r\n\t\t\tconst transportArray = [];\r\n\t\t\tconst id = new this.$snowFlakeId().generate();\r\n\t\t\ttransportArray.push(id);\r\n\t\t\ttransportArray.push(id);\r\n\t\t\ttransportArray.push(this.$store.getters.name);\r\n\t\t\ttransportArray.push(this.$store.getters.nickName);\r\n\t\t\ttransportArray.push(this.$store.getters.phonenumber);\r\n\t\t\ttransportArray.push(this.$store.getters.deptName);\r\n\t\t\ttransportArray.push(formatDate(new Date()));\r\n\t\t\ttransportArray.push(document.getElementById('tip').innerHTML);\r\n\t\t\ttransportArray.push(row.cropsId);\r\n\t\t\ttransportArray.push('中途定位');\r\n\t\t\tthis.$confirm(document.getElementById('tip').innerHTML, '定位', {\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis.$httpBlock\r\n\t\t\t\t\t\t.post(this.$httpUrl + '/driverapi/createTransport', { transportArray: transportArray })\r\n\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\tif (res.status === 200) {\r\n\t\t\t\t\t\t\t\tthis.msgSuccess('数据上链成功');\r\n\t\t\t\t\t\t\t\tthis.growDialog = false;\r\n\t\t\t\t\t\t\t\tconst transportInfo = {\r\n\t\t\t\t\t\t\t\t\tlng: Number(document.getElementById('lng').innerHTML),\r\n\t\t\t\t\t\t\t\t\tlat: Number(document.getElementById('lat').innerHTML),\r\n\t\t\t\t\t\t\t\t\tcropsId: row.cropsId,\r\n\t\t\t\t\t\t\t\t\tstatus: 1,\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tsaveAndUpdateTransportInfoToDb(transportInfo)\r\n\t\t\t\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\t\t\t\tthis.getList();\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.catch(err => {\r\n\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\t\tthis.msgError('存储异常 ' + err);\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\t\tmessage: '取消定位'\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * @param {Object} row开始配送\r\n\t\t */\r\n\t\tstartTransport(row) {\r\n\t\t\tconst transportArray = [];\r\n\t\t\tconst id = new this.$snowFlakeId().generate();\r\n\t\t\ttransportArray.push(id);\r\n\t\t\ttransportArray.push(id);\r\n\t\t\ttransportArray.push(this.$store.getters.name);\r\n\t\t\ttransportArray.push(this.$store.getters.nickName);\r\n\t\t\ttransportArray.push(this.$store.getters.phonenumber);\r\n\t\t\ttransportArray.push(this.$store.getters.deptName);\r\n\t\t\ttransportArray.push(formatDate(new Date()));\r\n\t\t\ttransportArray.push(document.getElementById('tip').innerHTML);\r\n\t\t\ttransportArray.push(row.cropsId);\r\n\t\t\ttransportArray.push('始发地');\r\n\t\t\tthis.$confirm('是否开始运送货物', '提示', {\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis.$httpBlock\r\n\t\t\t\t\t\t.post(this.$httpUrl + '/driverapi/createTransport', { transportArray: transportArray })\r\n\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\tif (res.status === 200) {\r\n\t\t\t\t\t\t\t\tthis.msgSuccess('数据上链成功');\r\n\t\t\t\t\t\t\t\tthis.growDialog = false;\r\n\t\t\t\t\t\t\t\tconst transportInfo = {\r\n\t\t\t\t\t\t\t\t\tlng: Number(document.getElementById('lng').innerHTML),\r\n\t\t\t\t\t\t\t\t\tlat: Number(document.getElementById('lat').innerHTML),\r\n\t\t\t\t\t\t\t\t\tcropsId: row.cropsId,\r\n\t\t\t\t\t\t\t\t\tid: row.id,\r\n\t\t\t\t\t\t\t\t\tstatus: 1,\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tsaveAndUpdateTransportInfoToDb(transportInfo)\r\n\t\t\t\t\t\t\t\t\t.then(res => {\r\n\r\n\t\t\t\t\t\t\t\t\t\tthis.getList();\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.catch(err => {\r\n\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\t\tthis.msgError('存储异常 ' + err);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\tmessage: '开始运送!'\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\t\tmessage: '已取消运送'\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetList() {\r\n\t\t\tlistTransport(this.$store.getters.name).then(res => {\r\n\t\t\t\tthis.transportList = res.data;\r\n\t\t\t});\r\n\t\t},\r\n\t\t/** 转换部门数据结构 */\r\n\t\tnormalizer(node) {\r\n\t\t\tif (node.children && !node.children.length) {\r\n\t\t\t\tdelete node.children;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tid: node.deptId,\r\n\t\t\t\tlabel: node.deptName,\r\n\t\t\t\tchildren: node.children\r\n\t\t\t};\r\n\t\t},\r\n\t\t// 字典状态字典翻译\r\n\t\tstatusFormat(row, column) {\r\n\t\t\treturn this.selectDictLabel(this.statusOptions, row.status);\r\n\t\t},\r\n\t\t// 取消按钮\r\n\t\tcancel() {\r\n\t\t\tthis.open = false;\r\n\t\t\tthis.reset();\r\n\t\t},\r\n\t\t// 表单重置\r\n\t\treset() {\r\n\t\t\tthis.form = {\r\n\t\t\t\tdeptId: undefined,\r\n\t\t\t\tparentId: undefined,\r\n\t\t\t\tdeptName: undefined,\r\n\t\t\t\torderNum: undefined,\r\n\t\t\t\tleader: undefined,\r\n\t\t\t\tphone: undefined,\r\n\t\t\t\temail: undefined,\r\n\t\t\t\tstatus: '0'\r\n\t\t\t};\r\n\t\t\tthis.resetForm('form');\r\n\t\t},\r\n\t\t/** 搜索按钮操作 */\r\n\t\thandleQuery() {\r\n\t\t\tthis.getList();\r\n\t\t},\r\n\t\t/** 重置按钮操作 */\r\n\t\tresetQuery() {\r\n\t\t\tthis.resetForm('queryForm');\r\n\t\t\tthis.handleQuery();\r\n\t\t},\r\n\t\t/** 新增按钮操作 */\r\n\t\thandleAdd(row) {\r\n\t\t\tthis.reset();\r\n\t\t\tif (row != undefined) {\r\n\t\t\t\tthis.form.parentId = row.deptId;\r\n\t\t\t}\r\n\t\t\tthis.open = true;\r\n\t\t\tthis.title = '添加部门';\r\n\t\t\tlistDept().then(response => {\r\n\t\t\t\tthis.deptOptions = this.handleTree(response.data, 'deptId');\r\n\t\t\t});\r\n\t\t},\r\n\t\t/** 修改按钮操作 */\r\n\t\thandleUpdate(row) {\r\n\t\t\tthis.reset();\r\n\t\t\tgetDept(row.deptId).then(response => {\r\n\t\t\t\tthis.form = response.data;\r\n\t\t\t\tthis.open = true;\r\n\t\t\t\tthis.title = '修改部门';\r\n\t\t\t});\r\n\t\t\tlistDeptExcludeChild(row.deptId).then(response => {\r\n\t\t\t\tthis.deptOptions = this.handleTree(response.data, 'deptId');\r\n\t\t\t});\r\n\t\t},\r\n\t\t/** 提交按钮 */\r\n\t\tsubmitForm: function() {\r\n\t\t\tthis.$refs['form'].validate(valid => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tif (this.form.deptId != undefined) {\r\n\t\t\t\t\t\tupdateDept(this.form).then(response => {\r\n\t\t\t\t\t\t\tif (response.code === 200) {\r\n\t\t\t\t\t\t\t\tthis.msgSuccess('修改成功');\r\n\t\t\t\t\t\t\t\tthis.open = false;\r\n\t\t\t\t\t\t\t\tthis.getList();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\taddDept(this.form).then(response => {\r\n\t\t\t\t\t\t\tif (response.code === 200) {\r\n\t\t\t\t\t\t\t\tthis.msgSuccess('新增成功');\r\n\t\t\t\t\t\t\t\tthis.open = false;\r\n\t\t\t\t\t\t\t\tthis.getList();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/** 删除按钮操作 */\r\n\t\thandleDelete(row) {\r\n\t\t\tthis.$confirm('是否确认删除名称为\"' + row.deptName + '\"的数据项?', '警告', {\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t})\r\n\t\t\t\t.then(function() {\r\n\t\t\t\t\treturn delDept(row.deptId);\r\n\t\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis.getList();\r\n\t\t\t\t\tthis.msgSuccess('删除成功');\r\n\t\t\t\t})\r\n\t\t\t\t.catch(function() {});\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n"]}]}