{"remainingRequest":"E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\src\\views\\trace\\retailer\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\src\\views\\trace\\retailer\\index.vue","mtime":1673353165809},{"path":"E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBsaXN0RGVwdCwgZ2V0RGVwdCwgZGVsRGVwdCwgYWRkRGVwdCwgdXBkYXRlRGVwdCwgbGlzdERlcHRFeGNsdWRlQ2hpbGQgfSBmcm9tICdAL2FwaS9zeXN0ZW0vZGVwdCc7DQppbXBvcnQge2FkZFRyYW5zcG9ydCwgbGlzdENyb3BzLGNoYW5nZUluVG9PdXR9IGZyb20gJy4uLy4uLy4uL2FwaS90cmFjZS9tYXRlcmlhbCc7DQppbXBvcnQgVHJlZXNlbGVjdCBmcm9tICdAcmlvcGhhZS92dWUtdHJlZXNlbGVjdCc7DQppbXBvcnQgJ0ByaW9waGFlL3Z1ZS10cmVlc2VsZWN0L2Rpc3QvdnVlLXRyZWVzZWxlY3QuY3NzJzsNCmltcG9ydCB7IGZvcm1hdERhdGUgfSBmcm9tICcuLi8uLi8uLi91dGlscy9pbmRleC5qcyc7DQppbXBvcnQge3VwbG9kSW1hZ2VzQmFzZTY0LGdldEFsbERyaXZlckJ5RGVwdElkLGdldEZhY3RvcnlCeURlcHRJZH0gZnJvbSAnLi4vLi4vLi4vYXBpL3RyYWNlL2Zhcm1lcic7DQppbXBvcnQge3F1ZXJ5Q3JvcHNMaXN0IH0gZnJvbSAnLi4vLi4vLi4vYXBpL3RyYWNlL3Byb2R1Y3QnOw0KaW1wb3J0IHt1cGRhdGVSZWNlaXZlU3RhdHVzIH0gZnJvbSAnLi4vLi4vLi4vYXBpL3RyYWNlL3JldGFpbGVyJzsNCmltcG9ydCBRckNvZGUgZnJvbSAncXJjb2RlanMyJw0KZXhwb3J0IGRlZmF1bHQgew0KCW5hbWU6ICdEZXB0JywNCgljb21wb25lbnRzOiB7IFRyZWVzZWxlY3QgfSwNCglkYXRhKCkgew0KCQlyZXR1cm4gew0KCQkJaW1hZ2VVcmw6JycsDQoJCQlub3RpY2VEZXRhaURpYWxvZzogZmFsc2UsDQoJCQkvLyDpga7nvanlsYINCgkJCWxvYWRpbmc6IHRydWUsDQoJCQkvLyDmmL7npLrmkJzntKLmnaHku7YNCgkJCXNob3dTZWFyY2g6IHRydWUsDQoJCQkvLyDooajmoLzmoJHmlbDmja4NCgkJCWRlcHRMaXN0OiBbXSwNCgkJCS8vIOmDqOmXqOagkemAiemhuQ0KCQkJZGVwdE9wdGlvbnM6IFtdLA0KCQkJLy8g5by55Ye65bGC5qCH6aKYDQoJCQl0aXRsZTogJycsDQoJCQkvLyDmmK/lkKbmmL7npLrlvLnlh7rlsYINCgkJCW9wZW46IGZhbHNlLA0KCQkJLy8g54q25oCB5pWw5o2u5a2X5YW4DQoJCQlzdGF0dXNPcHRpb25zOiBbXSwNCgkJCS8vIOafpeivouWPguaVsA0KCQkJcXVlcnlQYXJhbXM6IHsNCgkJCQlkZXB0TmFtZTogdW5kZWZpbmVkLA0KCQkJCXN0YXR1czogdW5kZWZpbmVkDQoJCQl9LA0KCQkJLy8g6KGo5Y2V5Y+C5pWwDQoJCQlmb3JtOiB7fSwNCg0KCQkJdHJhbnNwb3J0TGlzdDogW10sDQoJCQljaXR5RGV0YWlsOiAnJywNCgkJCWxuZzogTnVtYmVyLA0KCQkJbGF0OiBOdW1iZXIsDQoJCQlpbWdCYXNlNjQ6JycsDQoJCQlUZXN0aW5nUGhvdG9Vcmw6JycsDQoJCQljaGVja0luZm86JycsDQoJCQlkcml2ZXJMaXN0OltdLA0KCQkJbm90aWNlVHJhbnNwb3J0RGlhbG9nOmZhbHNlLA0KCQkJdHJhc3BvcnRGb3JtOnt9LA0KCQkJZmFjdG9yeUxpc3Q6W10sDQoJCQl0cmFjZUlkRGlhbG9nOmZhbHNlLA0KCQkJcmV0YWlsZXJJbmZvOicnDQoJCX07DQoJfSwNCgljcmVhdGVkKCkgew0KCQl0aGlzLmdldExpc3QoKTsNCgl9LA0KDQoJbW91bnRlZCgpIHsNCgkJLy90aGlzLnFyY29kZSgpOw0KCX0sDQoNCgltZXRob2RzOiB7DQoJICAvL+eUn+aIkOS6p+WTgea6r+a6kOeggQ0KICAgIGdlbmVyYXRlUXJDb2RlKHByb2R1Y3RJbmZvKXsNCiAgICAgIGxldCBxcmNvZGUgPSBuZXcgUVJDb2RlKCdxcmNvZGUnLCB7DQogICAgICAgIHdpZHRoOiAxMzIsDQogICAgICAgIGhlaWdodDogMTMyLA0KICAgICAgICB0ZXh0OiAnaHR0cDovLzEuMTE3LjIwOC4xOTM6MTIwMTEvIy9sb2dpbj9yZWRpcmVjdD0lMkZpbmRleCcsIC8vIOmcgOimgeS6jOe7tOeggei3s+i9rOeahOWcsOWdgA0KICAgICAgICBjb2xvckRhcms6ICJ5ZWxsb3ciLCAvL+WJjeaZr+iJsg0KICAgICAgICBjb2xvckxpZ2h0OiAiZ3JlZW4iLCAvL+iDjOaZr+iJsg0KICAgICAgfSkNCiAgICB9LA0KDQoJCS8v6I635Y+W5Lqn5ZOB5rqv5rqQSUQNCgkJZ2V0VHJhY2VJZChyb3cpew0KCQkJY29uc3QgcmV0YWlsZXJBcnJheSA9IFtdDQoJCQlyZXRhaWxlckFycmF5LnB1c2gocm93LmNyb3BzSWQpDQoJCQlyZXRhaWxlckFycmF5LnB1c2godGhpcy4kc3RvcmUuZ2V0dGVycy5uYW1lKQ0KCQkJdGhpcy4kaHR0cEJsb2NrDQoJCQkJLmdldCh0aGlzLiRodHRwVXJsICsgJy9yZXRhaWxlcmFwaS9xdWVyeVJldGFpbGVyQnlDcm9wc0lkP2Nyb3BzSWQ9Jytyb3cuY3JvcHNJZCsnJnJldGFpbGVySWQ9Jyt0aGlzLiRzdG9yZS5nZXR0ZXJzLm5hbWUpDQoJCQkJLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICBpZiAocmVzLmRhdGEubGVuZ3RoIDwgMSl7DQogICAgICAgICAgICB0aGlzLm1zZ0Vycm9yKCLor7flhYjnrb7mlLblkI7lho3ojrflj5YiKTsNCiAgICAgICAgICB9ZWxzZSB7DQogICAgICAgICAgICB0aGlzLnRyYWNlSWREaWFsb2cgPSB0cnVlDQogICAgICAgICAgICB0aGlzLnJldGFpbGVySW5mbyA9IHJlcy5kYXRhWzBdLlJlY29yZDsNCiAgICAgICAgICB9DQoNCgkJCQl9KQ0KCQkJCS5jYXRjaChlcnIgPT4gew0KCQkJCQl0aGlzLm1zZ0Vycm9yKCflrZjlgqjlvILluLggJyArIGVycik7DQoJCQkJfSk7DQoJCX0sDQoNCgkJLy/nrb7mlLYNCgkJcmVjZWl2ZShyb3cpew0KCQkJY29uc3QgcmV0YWlsZXJBcnJheSA9IFtdDQoJCQljb25zdCBpZCA9IG5ldyB0aGlzLiRzbm93Rmxha2VJZCgpLmdlbmVyYXRlKCk7DQoJCQlyZXRhaWxlckFycmF5LnB1c2goaWQpDQoJCQlyZXRhaWxlckFycmF5LnB1c2goaWQpDQoJCQlyZXRhaWxlckFycmF5LnB1c2gocm93LmNyb3BzSWQpDQoJCQlyZXRhaWxlckFycmF5LnB1c2godGhpcy4kc3RvcmUuZ2V0dGVycy5uaWNrTmFtZSkNCgkJCXJldGFpbGVyQXJyYXkucHVzaCh0aGlzLiRzdG9yZS5nZXR0ZXJzLm5hbWUpDQoJCQlyZXRhaWxlckFycmF5LnB1c2godGhpcy4kc3RvcmUuZ2V0dGVycy5waG9uZW51bWJlcikNCgkJCXJldGFpbGVyQXJyYXkucHVzaCh0aGlzLiRzdG9yZS5nZXR0ZXJzLmRlcHROYW1lKQ0KCQkJcmV0YWlsZXJBcnJheS5wdXNoKCfpm7bllK7llYbllK7ljZYnKQ0KCQkJdGhpcy4kY29uZmlybSgn5piv5ZCm56Gu6K6k562+5pS2Jytyb3cuY3JvcHNOYW1lLCAn562+5pS2Jywgew0KCQkJCWNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCgkJCQljYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywNCgkJCQl0eXBlOiAnd2FybmluZycNCgkJCX0pDQoJCQkJLnRoZW4oKCkgPT4gew0KCQkJCQl0aGlzLiRodHRwQmxvY2sNCgkJCQkJCS5wb3N0KHRoaXMuJGh0dHBVcmwgKyAnL3JldGFpbGVyYXBpL2NyZWF0ZVJldGFpbGVyJywgeyByZXRhaWxlckFycmF5OiByZXRhaWxlckFycmF5IH0pDQoJCQkJCQkudGhlbihyZXMgPT4gew0KCQkJCQkJCWlmIChyZXMuc3RhdHVzID09PSAyMDApIHsNCgkJCQkJCQkJY29uc3QgaW5mbyA9IHsNCgkJCQkJCQkJCWNyb3BzSWQ6cm93LmNyb3BzSWQsDQoJCQkJCQkJCQlmYWN0b3J5SWQ6dGhpcy4kc3RvcmUuZ2V0dGVycy5kZXB0SWQsDQoJCQkJCQkJCX0NCgkJCQkJCQkJdXBkYXRlUmVjZWl2ZVN0YXR1cyhpbmZvKS50aGVuKCgpID0+IHsNCgkJCQkJCQkJCXRoaXMubXNnU3VjY2Vzcygi562+5pS25oiQ5YqfIik7DQoJCQkJCQkJCQl0aGlzLmdldExpc3QoKTsNCgkJCQkJCQkJfSkuY2F0Y2goZXJyID0+IHsNCgkJCQkJCQkJCXRoaXMubXNnRXJyb3IoIuetvuaUtuWksei0pSIpDQoJCQkJCQkJCX0pDQoJCQkJCQkJfQ0KCQkJCQkJfSkNCgkJCQkJCS5jYXRjaChlcnIgPT4gew0KCQkJCQkJCXRoaXMubXNnRXJyb3IoJ+WtmOWCqOW8guW4uCAnICsgZXJyKTsNCgkJCQkJCX0pOw0KCQkJfSkNCgkJCQkuY2F0Y2goKCkgPT4gew0KCQkJCQl0aGlzLiRtZXNzYWdlKHsNCgkJCQkJCXR5cGU6ICdpbmZvJywNCgkJCQkJCW1lc3NhZ2U6ICflj5bmtognDQoJCQkJCX0pOw0KCQkJCX0pOw0KCQl9LA0KDQoJCWFkZE5vdGljZVRyYXNwb3J0KCl7DQoJCQl0aGlzLnRyYXNwb3J0Rm9ybS5jcm9wc0lkID0gdGhpcy5jaGVja0luZm8uY3JvcHNJZDsNCgkJCXRoaXMudHJhc3BvcnRGb3JtLmZhcm1lclVzZXJOYW1lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5uYW1lOw0KCQkJdGhpcy50cmFzcG9ydEZvcm0uZmFybWVyTmlja05hbWUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLm5pY2tOYW1lOw0KCQkJdGhpcy50cmFzcG9ydEZvcm0udGltZSA9IG5ldyBEYXRlKCk7DQoJCQl0aGlzLnRyYXNwb3J0Rm9ybS5kcml2ZXJJZCA9IHRoaXMudHJhc3BvcnRGb3JtLnVzZXJOYW1lOw0KCQkJdGhpcy50cmFzcG9ydEZvcm0uc3RhdHVzID0gMDsNCgkJCXRoaXMudHJhc3BvcnRGb3JtLmZhcm1lclRlbCA9IHRoaXMuJHN0b3JlLmdldHRlcnMucGhvbmVudW1iZXI7DQoJCQl0aGlzLnRyYXNwb3J0Rm9ybS5mYXJtZXJEZXB0ID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5kZXB0TmFtZTsNCgkJCXRoaXMudHJhc3BvcnRGb3JtLmZhY3RvcnlJZCA9IHRoaXMudHJhc3BvcnRGb3JtLmRlcHRJZA0KCQkJYWRkVHJhbnNwb3J0KHRoaXMudHJhc3BvcnRGb3JtKQ0KCQkJCS50aGVuKHJlcyA9PiB7DQoJCQkJCXRoaXMubXNnU3VjY2Vzcygn6IGU57O76L+Q6L6T5oiQ5YqfJyk7DQoJCQkJCXRoaXMubm90aWNlRGV0YWlEaWFsb2cgPSBmYWxzZTsNCgkJCQl9KQ0KCQkJCS5jYXRjaChlcnIgPT4gew0KCQkJCQl0aGlzLm1zZ0Vycm9yKCfogZTns7vov5DovpPlpLHotKXvvIzlj5HnlJ/lvILluLgnKTsNCgkJCQl9KTsNCgkJfSwNCg0KCQlub3RpY2VUcmFuc3BvcnQocm93KXsNCgkJCXRoaXMuY2hlY2tJbmZvID0gcm93Ow0KCQkJdGhpcy5ub3RpY2VEZXRhaURpYWxvZyA9IHRydWUNCgkJCWdldEFsbERyaXZlckJ5RGVwdElkKHRoaXMuJHN0b3JlLmdldHRlcnMuZGVwdElkKQ0KCQkJCS50aGVuKHJlcyA9PiB7DQoJCQkJCXRoaXMuZHJpdmVyTGlzdCA9IHJlcy5kYXRhOw0KCQkJCX0pDQoJCQkJLmNhdGNoKGVyciA9PiB7fSk7DQoJCQlnZXRGYWN0b3J5QnlEZXB0SWQoMTIzKQ0KCQkJCS50aGVuKHJlcyA9PiB7DQoJCQkJCXRoaXMuZmFjdG9yeUxpc3QgPSByZXMuZGF0YTsNCgkJCQl9KQ0KCQl9LA0KDQoJCS8qKg0KCQkgKiDlh7rlupMNCgkJICovDQoJCW91dEZhY3Rvcnkocm93KXsNCgkJCXRoaXMuY2hlY2tJbmZvID0gcm93Ow0KCQkJdGhpcy5vcGVuID0gdHJ1ZQ0KCQl9LA0KDQoJCWNyZWF0ZU1hY2hpbmcoKXsNCgkJICAgIGNvbnN0IGNoZWNrSW5mb0FycmF5ID0gW10NCgkJCWNvbnN0IGlkID0gbmV3IHRoaXMuJHNub3dGbGFrZUlkKCkuZ2VuZXJhdGUoKTsNCgkJCWNoZWNrSW5mb0FycmF5LnB1c2goaWQpDQoJCQljaGVja0luZm9BcnJheS5wdXNoKGlkKQ0KCQkJY2hlY2tJbmZvQXJyYXkucHVzaCh0aGlzLiRzdG9yZS5nZXR0ZXJzLm5pY2tOYW1lKQ0KCQkJY2hlY2tJbmZvQXJyYXkucHVzaCh0aGlzLiRzdG9yZS5nZXR0ZXJzLnBob25lbnVtYmVyKTsNCgkJCWNoZWNrSW5mb0FycmF5LnB1c2godGhpcy4kc3RvcmUuZ2V0dGVycy5kZXB0TmFtZSk7DQoJCQljaGVja0luZm9BcnJheS5wdXNoKHRoaXMuY2hlY2tJbmZvLmNyb3BzSWQpOw0KCQkJY2hlY2tJbmZvQXJyYXkucHVzaCh0aGlzLmZvcm0udGVzdGluZ1Jlc3VsdCk7DQoJCQljaGVja0luZm9BcnJheS5wdXNoKHRoaXMuY2hlY2tJbmZvLnRpbWUpOw0KCQkJY2hlY2tJbmZvQXJyYXkucHVzaChmb3JtYXREYXRlKG5ldyBEYXRlKCkpKTsNCgkJCWNoZWNrSW5mb0FycmF5LnB1c2godGhpcy5UZXN0aW5nUGhvdG9VcmwpOw0KCQkJY2hlY2tJbmZvQXJyYXkucHVzaCh0aGlzLmZvcm0ucmVtYXJrcyk7DQoJCQl0aGlzLiRodHRwQmxvY2sNCgkJCQkucG9zdCh0aGlzLiRodHRwVXJsICsgJy9tYXRlcmlhbGFwaS9jcmVhdGVNYWNoaW5nJywgeyBjaGVja0luZm9BcnJheTogY2hlY2tJbmZvQXJyYXkgfSkNCgkJCQkudGhlbihyZXMgPT4gew0KCQkJCQlpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7DQoJCQkJCQljaGFuZ2VJblRvT3V0KHRoaXMuY2hlY2tJbmZvLmNyb3BzSWQpLnRoZW4ocmVzID0+IHsNCgkJCQkJCQl0aGlzLm1zZ1N1Y2Nlc3MoIuWHuuW6k+aIkOWKnyIpDQoJCQkJCQkJdGhpcy5nZXRMaXN0KCk7DQoJCQkJCQl9KS5jYXRjaChlcnIgPT4gew0KCQkJCQkJCXRoaXMubXNnRXJyb3IoIuWHuuW6k+Wksei0pSIpDQoJCQkJCQl9KQ0KCQkJCQkJdGhpcy5vcGVuID0gZmFsc2U7DQoJCQkJCX0NCgkJCQl9KQ0KCQkJCS5jYXRjaChlcnIgPT4gew0KCQkJCQl0aGlzLm1zZ0Vycm9yKCflrZjlgqjlvILluLggJyArIGVycik7DQoJCQkJfSk7DQoJCX0sDQoNCgkJZ2V0RmlsZShmaWxlKSB7DQoJCQl0aGlzLmltYWdlVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlLnJhdyk7DQoJCQl0aGlzLmdldEJhc2U2NChmaWxlLnJhdykudGhlbihyZXMgPT4gew0KCQkJCXRoaXMuaW1nQmFzZTY0ID0gcmVzOw0KCQkJCWNvbnN0IGRhdGFzID0gew0KCQkJCQlpbWFnZUJhc2U2NDogdGhpcy5pbWdCYXNlNjQNCgkJCQl9Ow0KCQkJCXVwbG9kSW1hZ2VzQmFzZTY0KGRhdGFzKQ0KCQkJCQkudGhlbihyZXMgPT4gew0KCQkJCQkJdGhpcy5UZXN0aW5nUGhvdG9VcmwgPSByZXMubXNnOw0KCQkJCQkJdGhpcy5tc2dTdWNjZXNzKCflm77niYfkuIrkvKDmiJDlip8nKTsNCgkJCQkJfSkNCgkJCQkJLmNhdGNoKGVyciA9PiB7DQoJCQkJCQl0aGlzLm1zZ0Vycm9yKCflm77niYfkuIrkvKDlpLHotKUnKTsNCgkJCQkJfSk7DQoJCQl9KTsNCgkJfSwNCg0KCQlnZXRCYXNlNjQoZmlsZSkgew0KCQkJcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgew0KCQkJCWNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7DQoJCQkJbGV0IGltZ1Jlc3VsdCA9ICcnOw0KCQkJCXJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOw0KCQkJCXJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHsNCgkJCQkJaW1nUmVzdWx0ID0gcmVhZGVyLnJlc3VsdDsNCgkJCQl9Ow0KCQkJCXJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24oZXJyb3IpIHsNCgkJCQkJcmVqZWN0KGVycm9yKTsNCgkJCQl9Ow0KCQkJCXJlYWRlci5vbmxvYWRlbmQgPSBmdW5jdGlvbigpIHsNCgkJCQkJcmVzb2x2ZShpbWdSZXN1bHQpOw0KCQkJCX07DQoJCQl9KTsNCgkJfSwNCg0KDQoJCWdldExpc3QoKSB7DQoJCQlxdWVyeUNyb3BzTGlzdCh0aGlzLiRzdG9yZS5nZXR0ZXJzLmRlcHRJZCkudGhlbihyZXMgPT4gew0KCQkJCXRoaXMudHJhbnNwb3J0TGlzdCA9IHJlcy5kYXRhOw0KCQkJfSk7DQoJCX0sDQoJCS8qKiDovazmjaLpg6jpl6jmlbDmja7nu5PmnoQgKi8NCgkJbm9ybWFsaXplcihub2RlKSB7DQoJCQlpZiAobm9kZS5jaGlsZHJlbiAmJiAhbm9kZS5jaGlsZHJlbi5sZW5ndGgpIHsNCgkJCQlkZWxldGUgbm9kZS5jaGlsZHJlbjsNCgkJCX0NCgkJCXJldHVybiB7DQoJCQkJaWQ6IG5vZGUuZGVwdElkLA0KCQkJCWxhYmVsOiBub2RlLmRlcHROYW1lLA0KCQkJCWNoaWxkcmVuOiBub2RlLmNoaWxkcmVuDQoJCQl9Ow0KCQl9LA0KCQkvLyDlrZflhbjnirbmgIHlrZflhbjnv7vor5ENCgkJc3RhdHVzRm9ybWF0KHJvdywgY29sdW1uKSB7DQoJCQlyZXR1cm4gdGhpcy5zZWxlY3REaWN0TGFiZWwodGhpcy5zdGF0dXNPcHRpb25zLCByb3cuc3RhdHVzKTsNCgkJfSwNCgkJLy8g5Y+W5raI5oyJ6ZKuDQoJCWNhbmNlbCgpIHsNCgkJCXRoaXMub3BlbiA9IGZhbHNlOw0KCQkJdGhpcy5yZXNldCgpOw0KCQl9LA0KCQkvLyDooajljZXph43nva4NCgkJcmVzZXQoKSB7DQoJCQl0aGlzLmZvcm0gPSB7DQoJCQkJZGVwdElkOiB1bmRlZmluZWQsDQoJCQkJcGFyZW50SWQ6IHVuZGVmaW5lZCwNCgkJCQlkZXB0TmFtZTogdW5kZWZpbmVkLA0KCQkJCW9yZGVyTnVtOiB1bmRlZmluZWQsDQoJCQkJbGVhZGVyOiB1bmRlZmluZWQsDQoJCQkJcGhvbmU6IHVuZGVmaW5lZCwNCgkJCQllbWFpbDogdW5kZWZpbmVkLA0KCQkJCXN0YXR1czogJzAnDQoJCQl9Ow0KCQkJdGhpcy5yZXNldEZvcm0oJ2Zvcm0nKTsNCgkJfSwNCgkJLyoqIOaQnOe0ouaMiemSruaTjeS9nCAqLw0KCQloYW5kbGVRdWVyeSgpIHsNCgkJCXRoaXMuZ2V0TGlzdCgpOw0KCQl9LA0KCQkvKiog6YeN572u5oyJ6ZKu5pON5L2cICovDQoJCXJlc2V0UXVlcnkoKSB7DQoJCQl0aGlzLnJlc2V0Rm9ybSgncXVlcnlGb3JtJyk7DQoJCQl0aGlzLmhhbmRsZVF1ZXJ5KCk7DQoJCX0sDQoJCS8qKiDmlrDlop7mjInpkq7mk43kvZwgKi8NCgkJaGFuZGxlQWRkKHJvdykgew0KCQkJdGhpcy5yZXNldCgpOw0KCQkJaWYgKHJvdyAhPSB1bmRlZmluZWQpIHsNCgkJCQl0aGlzLmZvcm0ucGFyZW50SWQgPSByb3cuZGVwdElkOw0KCQkJfQ0KCQkJdGhpcy5vcGVuID0gdHJ1ZTsNCgkJCXRoaXMudGl0bGUgPSAn5re75Yqg6YOo6ZeoJzsNCgkJCWxpc3REZXB0KCkudGhlbihyZXNwb25zZSA9PiB7DQoJCQkJdGhpcy5kZXB0T3B0aW9ucyA9IHRoaXMuaGFuZGxlVHJlZShyZXNwb25zZS5kYXRhLCAnZGVwdElkJyk7DQoJCQl9KTsNCgkJfSwNCgkJLyoqIOS/ruaUueaMiemSruaTjeS9nCAqLw0KCQloYW5kbGVVcGRhdGUocm93KSB7DQoJCQl0aGlzLnJlc2V0KCk7DQoJCQlnZXREZXB0KHJvdy5kZXB0SWQpLnRoZW4ocmVzcG9uc2UgPT4gew0KCQkJCXRoaXMuZm9ybSA9IHJlc3BvbnNlLmRhdGE7DQoJCQkJdGhpcy5vcGVuID0gdHJ1ZTsNCgkJCQl0aGlzLnRpdGxlID0gJ+S/ruaUuemDqOmXqCc7DQoJCQl9KTsNCgkJCWxpc3REZXB0RXhjbHVkZUNoaWxkKHJvdy5kZXB0SWQpLnRoZW4ocmVzcG9uc2UgPT4gew0KCQkJCXRoaXMuZGVwdE9wdGlvbnMgPSB0aGlzLmhhbmRsZVRyZWUocmVzcG9uc2UuZGF0YSwgJ2RlcHRJZCcpOw0KCQkJfSk7DQoJCX0sDQoJCS8qKiDmj5DkuqTmjInpkq4gKi8NCgkJc3VibWl0Rm9ybTogZnVuY3Rpb24oKSB7DQoJCQl0aGlzLiRyZWZzWydmb3JtJ10udmFsaWRhdGUodmFsaWQgPT4gew0KCQkJCWlmICh2YWxpZCkgew0KCQkJCQlpZiAodGhpcy5mb3JtLmRlcHRJZCAhPSB1bmRlZmluZWQpIHsNCgkJCQkJCXVwZGF0ZURlcHQodGhpcy5mb3JtKS50aGVuKHJlc3BvbnNlID0+IHsNCgkJCQkJCQlpZiAocmVzcG9uc2UuY29kZSA9PT0gMjAwKSB7DQoJCQkJCQkJCXRoaXMubXNnU3VjY2Vzcygn5L+u5pS55oiQ5YqfJyk7DQoJCQkJCQkJCXRoaXMub3BlbiA9IGZhbHNlOw0KCQkJCQkJCQl0aGlzLmdldExpc3QoKTsNCgkJCQkJCQl9DQoJCQkJCQl9KTsNCgkJCQkJfSBlbHNlIHsNCgkJCQkJCWFkZERlcHQodGhpcy5mb3JtKS50aGVuKHJlc3BvbnNlID0+IHsNCgkJCQkJCQlpZiAocmVzcG9uc2UuY29kZSA9PT0gMjAwKSB7DQoJCQkJCQkJCXRoaXMubXNnU3VjY2Vzcygn5paw5aKe5oiQ5YqfJyk7DQoJCQkJCQkJCXRoaXMub3BlbiA9IGZhbHNlOw0KCQkJCQkJCQl0aGlzLmdldExpc3QoKTsNCgkJCQkJCQl9DQoJCQkJCQl9KTsNCgkJCQkJfQ0KCQkJCX0NCgkJCX0pOw0KCQl9LA0KCQkvKiog5Yig6Zmk5oyJ6ZKu5pON5L2cICovDQoJCWhhbmRsZURlbGV0ZShyb3cpIHsNCgkJCXRoaXMuJGNvbmZpcm0oJ+aYr+WQpuehruiupOWIoOmZpOWQjeensOS4uiInICsgcm93LmRlcHROYW1lICsgJyLnmoTmlbDmja7pobk/JywgJ+itpuWRiicsIHsNCgkJCQljb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsDQoJCQkJY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsDQoJCQkJdHlwZTogJ3dhcm5pbmcnDQoJCQl9KQ0KCQkJCS50aGVuKGZ1bmN0aW9uKCkgew0KCQkJCQlyZXR1cm4gZGVsRGVwdChyb3cuZGVwdElkKTsNCgkJCQl9KQ0KCQkJCS50aGVuKCgpID0+IHsNCgkJCQkJdGhpcy5nZXRMaXN0KCk7DQoJCQkJCXRoaXMubXNnU3VjY2Vzcygn5Yig6Zmk5oiQ5YqfJyk7DQoJCQkJfSkNCgkJCQkuY2F0Y2goZnVuY3Rpb24oKSB7fSk7DQoJCX0NCgl9DQp9Ow0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/trace/retailer","sourcesContent":["<template>\r\n\t<div class=\"app-container\">\r\n\t\t<el-divider>待处理业务</el-divider>\r\n\t\t<br />\r\n\t\t<el-table :data=\"transportList\">\r\n\t\t\t<el-table-column type=\"selection\" width=\"55\" align=\"center\" />\r\n\t\t\t<el-table-column label=\"产品编号\" prop=\"cropsId\" />\r\n\t\t\t<el-table-column label=\"产品名称\" prop=\"cropsName\" />\r\n\t\t\t<el-table-column label=\"产品来源\" prop=\"farmerDept\" />\r\n\t\t\t<el-table-column label=\"时间\" prop=\"time\" />\r\n\t\t\t<el-table-column label=\"签收状态\" prop=\"retailerReceiveStatus\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-tag v-show=\"scope.row.retailerReceiveStatus === null\">未签收</el-tag>\r\n\t\t\t\t\t<el-tag v-show=\"scope.row.retailerReceiveStatus === 1\">已签收</el-tag>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-button v-show=\"scope.row.retailerReceiveStatus === null\" size=\"mini\" type=\"text\" @click=\"receive(scope.row)\">签收</el-button>\r\n\t\t\t\t\t<el-button size=\"mini\" type=\"text\" @click=\"generateQrCode(scope.row)\">生成溯源码</el-button>\r\n\t\t\t\t\t<el-button size=\"mini\" type=\"text\" @click=\"getTraceId(scope.row)\">获取产品溯源ID</el-button>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t</el-table>\r\n\r\n\r\n\t\t<el-dialog :title=\"title\" :visible.sync=\"open\" width=\"700px\" append-to-body>\r\n\t\t\t<el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\r\n\t\t\t\t<el-row>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"检测结果\" prop=\"nickName\"><el-input v-model=\"form.testingResult\" placeholder=\"请输入检测结果\" /></el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\t\t\t\t<el-form-item label=\"备注\"><el-input v-model=\"form.remarks\" type=\"textarea\" placeholder=\"请输入内容\"></el-input></el-form-item>\r\n\t\t\t\t<el-row>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"检测图片:\">\r\n\t\t\t\t\t\t\t<el-upload class=\"avatar-uploader\" :on-change=\"getFile\" :show-file-list=\"false\" :auto-upload=\"false\">\r\n\t\t\t\t\t\t\t\t<img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\" />\r\n\t\t\t\t\t\t\t\t<i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n\t\t\t\t\t\t\t</el-upload>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\r\n\t\t\t</el-form>\r\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button type=\"primary\" @click=\"createMaching\">确 定</el-button>\r\n\t\t\t\t<el-button @click=\"cancel\">取 消</el-button>\r\n\t\t\t</div>\r\n\t\t</el-dialog>\r\n\r\n\t\t<el-dialog center title=\"联系运输\" :visible.sync=\"noticeDetaiDialog\" width=\"500px\" append-to-body>\r\n\t\t\t<el-form ref=\"form\" :model=\"trasportForm\" label-width=\"80px\">\r\n\t\t\t\t<el-row>\r\n\t\t\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t\t\t<el-form-item label=\"选择司机\" prop=\"nickName\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"trasportForm.userName\" placeholder=\"请选择\">\r\n\t\t\t\t\t\t\t\t<el-option v-for=\"user in driverList\" :key=\"user.userName\" :label=\"user.nickName\" :value=\"user.userName\"></el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\t\t\t\t<el-row>\r\n\t\t\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t\t\t<el-form-item label=\"生产厂商\" prop=\"nickName\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"trasportForm.deptId\" placeholder=\"请选择\">\r\n\t\t\t\t\t\t\t\t<el-option v-for=\"dept in factoryList\" :key=\"dept.deptId\" :label=\"dept.deptName\" :value=\"dept.deptId\"></el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\t\t\t\t<el-form-item label=\"备注\"><el-input v-model=\"trasportForm.remarks\" type=\"textarea\" placeholder=\"请输入内容\"></el-input></el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button type=\"primary\" @click=\"addNoticeTrasport\">确 定</el-button>\r\n\t\t\t\t<el-button @click=\"cancel\">取 消</el-button>\r\n\t\t\t</div>\r\n\t\t</el-dialog>\r\n\r\n\t\t<el-dialog center title=\"产品溯源ID\" :visible.sync=\"traceIdDialog\" width=\"500px\" append-to-body>\r\n\t\t\t<json-viewer :value=\"retailerInfo.product_id\" expand-depth=5 copyable boxed></json-viewer>\r\n\t\t</el-dialog>\r\n\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { listDept, getDept, delDept, addDept, updateDept, listDeptExcludeChild } from '@/api/system/dept';\r\nimport {addTransport, listCrops,changeInToOut} from '../../../api/trace/material';\r\nimport Treeselect from '@riophae/vue-treeselect';\r\nimport '@riophae/vue-treeselect/dist/vue-treeselect.css';\r\nimport { formatDate } from '../../../utils/index.js';\r\nimport {uplodImagesBase64,getAllDriverByDeptId,getFactoryByDeptId} from '../../../api/trace/farmer';\r\nimport {queryCropsList } from '../../../api/trace/product';\r\nimport {updateReceiveStatus } from '../../../api/trace/retailer';\r\nimport QrCode from 'qrcodejs2'\r\nexport default {\r\n\tname: 'Dept',\r\n\tcomponents: { Treeselect },\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\timageUrl:'',\r\n\t\t\tnoticeDetaiDialog: false,\r\n\t\t\t// 遮罩层\r\n\t\t\tloading: true,\r\n\t\t\t// 显示搜索条件\r\n\t\t\tshowSearch: true,\r\n\t\t\t// 表格树数据\r\n\t\t\tdeptList: [],\r\n\t\t\t// 部门树选项\r\n\t\t\tdeptOptions: [],\r\n\t\t\t// 弹出层标题\r\n\t\t\ttitle: '',\r\n\t\t\t// 是否显示弹出层\r\n\t\t\topen: false,\r\n\t\t\t// 状态数据字典\r\n\t\t\tstatusOptions: [],\r\n\t\t\t// 查询参数\r\n\t\t\tqueryParams: {\r\n\t\t\t\tdeptName: undefined,\r\n\t\t\t\tstatus: undefined\r\n\t\t\t},\r\n\t\t\t// 表单参数\r\n\t\t\tform: {},\r\n\r\n\t\t\ttransportList: [],\r\n\t\t\tcityDetail: '',\r\n\t\t\tlng: Number,\r\n\t\t\tlat: Number,\r\n\t\t\timgBase64:'',\r\n\t\t\tTestingPhotoUrl:'',\r\n\t\t\tcheckInfo:'',\r\n\t\t\tdriverList:[],\r\n\t\t\tnoticeTransportDialog:false,\r\n\t\t\ttrasportForm:{},\r\n\t\t\tfactoryList:[],\r\n\t\t\ttraceIdDialog:false,\r\n\t\t\tretailerInfo:''\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tthis.getList();\r\n\t},\r\n\r\n\tmounted() {\r\n\t\t//this.qrcode();\r\n\t},\r\n\r\n\tmethods: {\r\n\t  //生成产品溯源码\r\n    generateQrCode(productInfo){\r\n      let qrcode = new QRCode('qrcode', {\r\n        width: 132,\r\n        height: 132,\r\n        text: 'http://1.117.208.193:12011/#/login?redirect=%2Findex', // 需要二维码跳转的地址\r\n        colorDark: \"yellow\", //前景色\r\n        colorLight: \"green\", //背景色\r\n      })\r\n    },\r\n\r\n\t\t//获取产品溯源ID\r\n\t\tgetTraceId(row){\r\n\t\t\tconst retailerArray = []\r\n\t\t\tretailerArray.push(row.cropsId)\r\n\t\t\tretailerArray.push(this.$store.getters.name)\r\n\t\t\tthis.$httpBlock\r\n\t\t\t\t.get(this.$httpUrl + '/retailerapi/queryRetailerByCropsId?cropsId='+row.cropsId+'&retailerId='+this.$store.getters.name)\r\n\t\t\t\t.then(res => {\r\n          if (res.data.length < 1){\r\n            this.msgError(\"请先签收后再获取\");\r\n          }else {\r\n            this.traceIdDialog = true\r\n            this.retailerInfo = res.data[0].Record;\r\n          }\r\n\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tthis.msgError('存储异常 ' + err);\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\t//签收\r\n\t\treceive(row){\r\n\t\t\tconst retailerArray = []\r\n\t\t\tconst id = new this.$snowFlakeId().generate();\r\n\t\t\tretailerArray.push(id)\r\n\t\t\tretailerArray.push(id)\r\n\t\t\tretailerArray.push(row.cropsId)\r\n\t\t\tretailerArray.push(this.$store.getters.nickName)\r\n\t\t\tretailerArray.push(this.$store.getters.name)\r\n\t\t\tretailerArray.push(this.$store.getters.phonenumber)\r\n\t\t\tretailerArray.push(this.$store.getters.deptName)\r\n\t\t\tretailerArray.push('零售商售卖')\r\n\t\t\tthis.$confirm('是否确认签收'+row.cropsName, '签收', {\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis.$httpBlock\r\n\t\t\t\t\t\t.post(this.$httpUrl + '/retailerapi/createRetailer', { retailerArray: retailerArray })\r\n\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\tif (res.status === 200) {\r\n\t\t\t\t\t\t\t\tconst info = {\r\n\t\t\t\t\t\t\t\t\tcropsId:row.cropsId,\r\n\t\t\t\t\t\t\t\t\tfactoryId:this.$store.getters.deptId,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tupdateReceiveStatus(info).then(() => {\r\n\t\t\t\t\t\t\t\t\tthis.msgSuccess(\"签收成功\");\r\n\t\t\t\t\t\t\t\t\tthis.getList();\r\n\t\t\t\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\t\t\t\tthis.msgError(\"签收失败\")\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\t\tthis.msgError('存储异常 ' + err);\r\n\t\t\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\t\tmessage: '取消'\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\taddNoticeTrasport(){\r\n\t\t\tthis.trasportForm.cropsId = this.checkInfo.cropsId;\r\n\t\t\tthis.trasportForm.farmerUserName = this.$store.getters.name;\r\n\t\t\tthis.trasportForm.farmerNickName = this.$store.getters.nickName;\r\n\t\t\tthis.trasportForm.time = new Date();\r\n\t\t\tthis.trasportForm.driverId = this.trasportForm.userName;\r\n\t\t\tthis.trasportForm.status = 0;\r\n\t\t\tthis.trasportForm.farmerTel = this.$store.getters.phonenumber;\r\n\t\t\tthis.trasportForm.farmerDept = this.$store.getters.deptName;\r\n\t\t\tthis.trasportForm.factoryId = this.trasportForm.deptId\r\n\t\t\taddTransport(this.trasportForm)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tthis.msgSuccess('联系运输成功');\r\n\t\t\t\t\tthis.noticeDetaiDialog = false;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tthis.msgError('联系运输失败，发生异常');\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\tnoticeTransport(row){\r\n\t\t\tthis.checkInfo = row;\r\n\t\t\tthis.noticeDetaiDialog = true\r\n\t\t\tgetAllDriverByDeptId(this.$store.getters.deptId)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tthis.driverList = res.data;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {});\r\n\t\t\tgetFactoryByDeptId(123)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tthis.factoryList = res.data;\r\n\t\t\t\t})\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 出库\r\n\t\t */\r\n\t\toutFactory(row){\r\n\t\t\tthis.checkInfo = row;\r\n\t\t\tthis.open = true\r\n\t\t},\r\n\r\n\t\tcreateMaching(){\r\n\t\t    const checkInfoArray = []\r\n\t\t\tconst id = new this.$snowFlakeId().generate();\r\n\t\t\tcheckInfoArray.push(id)\r\n\t\t\tcheckInfoArray.push(id)\r\n\t\t\tcheckInfoArray.push(this.$store.getters.nickName)\r\n\t\t\tcheckInfoArray.push(this.$store.getters.phonenumber);\r\n\t\t\tcheckInfoArray.push(this.$store.getters.deptName);\r\n\t\t\tcheckInfoArray.push(this.checkInfo.cropsId);\r\n\t\t\tcheckInfoArray.push(this.form.testingResult);\r\n\t\t\tcheckInfoArray.push(this.checkInfo.time);\r\n\t\t\tcheckInfoArray.push(formatDate(new Date()));\r\n\t\t\tcheckInfoArray.push(this.TestingPhotoUrl);\r\n\t\t\tcheckInfoArray.push(this.form.remarks);\r\n\t\t\tthis.$httpBlock\r\n\t\t\t\t.post(this.$httpUrl + '/materialapi/createMaching', { checkInfoArray: checkInfoArray })\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tif (res.status === 200) {\r\n\t\t\t\t\t\tchangeInToOut(this.checkInfo.cropsId).then(res => {\r\n\t\t\t\t\t\t\tthis.msgSuccess(\"出库成功\")\r\n\t\t\t\t\t\t\tthis.getList();\r\n\t\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\t\tthis.msgError(\"出库失败\")\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.open = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tthis.msgError('存储异常 ' + err);\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetFile(file) {\r\n\t\t\tthis.imageUrl = URL.createObjectURL(file.raw);\r\n\t\t\tthis.getBase64(file.raw).then(res => {\r\n\t\t\t\tthis.imgBase64 = res;\r\n\t\t\t\tconst datas = {\r\n\t\t\t\t\timageBase64: this.imgBase64\r\n\t\t\t\t};\r\n\t\t\t\tuplodImagesBase64(datas)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tthis.TestingPhotoUrl = res.msg;\r\n\t\t\t\t\t\tthis.msgSuccess('图片上传成功');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tthis.msgError('图片上传失败');\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetBase64(file) {\r\n\t\t\treturn new Promise(function(resolve, reject) {\r\n\t\t\t\tconst reader = new FileReader();\r\n\t\t\t\tlet imgResult = '';\r\n\t\t\t\treader.readAsDataURL(file);\r\n\t\t\t\treader.onload = function() {\r\n\t\t\t\t\timgResult = reader.result;\r\n\t\t\t\t};\r\n\t\t\t\treader.onerror = function(error) {\r\n\t\t\t\t\treject(error);\r\n\t\t\t\t};\r\n\t\t\t\treader.onloadend = function() {\r\n\t\t\t\t\tresolve(imgResult);\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t},\r\n\r\n\r\n\t\tgetList() {\r\n\t\t\tqueryCropsList(this.$store.getters.deptId).then(res => {\r\n\t\t\t\tthis.transportList = res.data;\r\n\t\t\t});\r\n\t\t},\r\n\t\t/** 转换部门数据结构 */\r\n\t\tnormalizer(node) {\r\n\t\t\tif (node.children && !node.children.length) {\r\n\t\t\t\tdelete node.children;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tid: node.deptId,\r\n\t\t\t\tlabel: node.deptName,\r\n\t\t\t\tchildren: node.children\r\n\t\t\t};\r\n\t\t},\r\n\t\t// 字典状态字典翻译\r\n\t\tstatusFormat(row, column) {\r\n\t\t\treturn this.selectDictLabel(this.statusOptions, row.status);\r\n\t\t},\r\n\t\t// 取消按钮\r\n\t\tcancel() {\r\n\t\t\tthis.open = false;\r\n\t\t\tthis.reset();\r\n\t\t},\r\n\t\t// 表单重置\r\n\t\treset() {\r\n\t\t\tthis.form = {\r\n\t\t\t\tdeptId: undefined,\r\n\t\t\t\tparentId: undefined,\r\n\t\t\t\tdeptName: undefined,\r\n\t\t\t\torderNum: undefined,\r\n\t\t\t\tleader: undefined,\r\n\t\t\t\tphone: undefined,\r\n\t\t\t\temail: undefined,\r\n\t\t\t\tstatus: '0'\r\n\t\t\t};\r\n\t\t\tthis.resetForm('form');\r\n\t\t},\r\n\t\t/** 搜索按钮操作 */\r\n\t\thandleQuery() {\r\n\t\t\tthis.getList();\r\n\t\t},\r\n\t\t/** 重置按钮操作 */\r\n\t\tresetQuery() {\r\n\t\t\tthis.resetForm('queryForm');\r\n\t\t\tthis.handleQuery();\r\n\t\t},\r\n\t\t/** 新增按钮操作 */\r\n\t\thandleAdd(row) {\r\n\t\t\tthis.reset();\r\n\t\t\tif (row != undefined) {\r\n\t\t\t\tthis.form.parentId = row.deptId;\r\n\t\t\t}\r\n\t\t\tthis.open = true;\r\n\t\t\tthis.title = '添加部门';\r\n\t\t\tlistDept().then(response => {\r\n\t\t\t\tthis.deptOptions = this.handleTree(response.data, 'deptId');\r\n\t\t\t});\r\n\t\t},\r\n\t\t/** 修改按钮操作 */\r\n\t\thandleUpdate(row) {\r\n\t\t\tthis.reset();\r\n\t\t\tgetDept(row.deptId).then(response => {\r\n\t\t\t\tthis.form = response.data;\r\n\t\t\t\tthis.open = true;\r\n\t\t\t\tthis.title = '修改部门';\r\n\t\t\t});\r\n\t\t\tlistDeptExcludeChild(row.deptId).then(response => {\r\n\t\t\t\tthis.deptOptions = this.handleTree(response.data, 'deptId');\r\n\t\t\t});\r\n\t\t},\r\n\t\t/** 提交按钮 */\r\n\t\tsubmitForm: function() {\r\n\t\t\tthis.$refs['form'].validate(valid => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tif (this.form.deptId != undefined) {\r\n\t\t\t\t\t\tupdateDept(this.form).then(response => {\r\n\t\t\t\t\t\t\tif (response.code === 200) {\r\n\t\t\t\t\t\t\t\tthis.msgSuccess('修改成功');\r\n\t\t\t\t\t\t\t\tthis.open = false;\r\n\t\t\t\t\t\t\t\tthis.getList();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\taddDept(this.form).then(response => {\r\n\t\t\t\t\t\t\tif (response.code === 200) {\r\n\t\t\t\t\t\t\t\tthis.msgSuccess('新增成功');\r\n\t\t\t\t\t\t\t\tthis.open = false;\r\n\t\t\t\t\t\t\t\tthis.getList();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/** 删除按钮操作 */\r\n\t\thandleDelete(row) {\r\n\t\t\tthis.$confirm('是否确认删除名称为\"' + row.deptName + '\"的数据项?', '警告', {\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t})\r\n\t\t\t\t.then(function() {\r\n\t\t\t\t\treturn delDept(row.deptId);\r\n\t\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis.getList();\r\n\t\t\t\t\tthis.msgSuccess('删除成功');\r\n\t\t\t\t})\r\n\t\t\t\t.catch(function() {});\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n<style>\r\n.avatar-uploader .el-upload {\r\n\tborder: 1px dashed #d9d9d9;\r\n\tborder-radius: 6px;\r\n\tcursor: pointer;\r\n\tposition: relative;\r\n\toverflow: hidden;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n\tborder-color: #409eff;\r\n}\r\n.avatar-uploader-icon {\r\n\tfont-size: 28px;\r\n\tcolor: #8c939d;\r\n\twidth: 178px;\r\n\theight: 178px;\r\n\tline-height: 178px;\r\n\ttext-align: center;\r\n}\r\n.avatar {\r\n\twidth: 300px;\r\n\theight: 270px;\r\n\tdisplay: block;\r\n}\r\n\r\n.image {\r\n\twidth: 80%;\r\n\tdisplay: block;\r\n}\r\n</style>\r\n"]}]}