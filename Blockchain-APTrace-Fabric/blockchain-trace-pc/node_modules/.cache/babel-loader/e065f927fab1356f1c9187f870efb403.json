{"remainingRequest":"E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\node_modules\\babel-loader\\lib\\index.js!E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\src\\views\\trace\\product\\record.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\src\\views\\trace\\product\\record.vue","mtime":1673353165807},{"path":"E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\babel.config.js","mtime":1673353165524},{"path":"E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnZhciBfcHJvZHVjdCA9IHJlcXVpcmUoIi4uLy4uLy4uL2FwaS90cmFjZS9wcm9kdWN0Iik7CnZhciBfaW5kZXggPSByZXF1aXJlKCIuLi8uLi8uLi91dGlscy9pbmRleC5qcyIpOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwp2YXIgX2RlZmF1bHQgPSB7CiAgbmFtZTogJ1JlY29yZCcsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRhc2tMaXN0czogW10sCiAgICAgIHdvcmtDb250ZW50RGlhbG9nOiBmYWxzZSwKICAgICAgcmVjb3JkRm9ybToge30sCiAgICAgIHRhc2tJbmZvOiAnJwogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnRhc2tMaXN0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBzdWJtaXRPcGVyYXRpb246IGZ1bmN0aW9uIHN1Ym1pdE9wZXJhdGlvbigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIG9wZXJhdGlvbkFycmF5ID0gW107CiAgICAgIHZhciBpZCA9IG5ldyB0aGlzLiRzbm93Rmxha2VJZCgpLmdlbmVyYXRlKCk7CiAgICAgIG9wZXJhdGlvbkFycmF5LnB1c2goaWQpOwogICAgICBvcGVyYXRpb25BcnJheS5wdXNoKGlkKTsKICAgICAgb3BlcmF0aW9uQXJyYXkucHVzaCh0aGlzLnRhc2tJbmZvLmNyb3BzSWQpOwogICAgICBvcGVyYXRpb25BcnJheS5wdXNoKHRoaXMuJHN0b3JlLmdldHRlcnMubmlja05hbWUpOwogICAgICBvcGVyYXRpb25BcnJheS5wdXNoKHRoaXMuJHN0b3JlLmdldHRlcnMucGhvbmVudW1iZXIpOwogICAgICBvcGVyYXRpb25BcnJheS5wdXNoKCgwLCBfaW5kZXguZm9ybWF0RGF0ZSkobmV3IERhdGUoKSkpOwogICAgICBvcGVyYXRpb25BcnJheS5wdXNoKHRoaXMucmVjb3JkRm9ybS53b3JrQ29udGVudCk7CiAgICAgIG9wZXJhdGlvbkFycmF5LnB1c2godGhpcy5yZWNvcmRGb3JtLnJlbWFya3MpOwogICAgICB0aGlzLiRodHRwQmxvY2sucG9zdCh0aGlzLiRodHRwVXJsICsgJy9wcm9kdWN0YXBpL2NyZWF0ZU9wZXJhdGlvbicsIHsKICAgICAgICBvcGVyYXRpb25BcnJheTogb3BlcmF0aW9uQXJyYXkKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgX3RoaXMubXNnU3VjY2Vzcygi5pWw5o2u5LiK6ZO+5oiQ5YqfIik7CiAgICAgICAgICBfdGhpcy53b3JrQ29udGVudERpYWxvZyA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIF90aGlzLm1zZ0Vycm9yKCflrZjlgqjlvILluLggJyArIGVycik7CiAgICAgIH0pOwogICAgfSwKICAgIGFkZFdvcmtDb250ZW50OiBmdW5jdGlvbiBhZGRXb3JrQ29udGVudChyb3cpIHsKICAgICAgdGhpcy50YXNrSW5mbyA9IHJvdzsKICAgICAgdGhpcy53b3JrQ29udGVudERpYWxvZyA9IHRydWU7CiAgICB9LAogICAgdGFza0xpc3Q6IGZ1bmN0aW9uIHRhc2tMaXN0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgKDAsIF9wcm9kdWN0LnF1ZXJ5VGFza0xpc3QpKCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMyLnRhc2tMaXN0cyA9IHJlcy5kYXRhOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgX3RoaXMyLm1zZ0Vycm9yKCLojrflj5bku7vliqHlpLHotKUiKTsKICAgICAgfSk7CiAgICB9CiAgfQp9OwpleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDs="},{"version":3,"mappings":";;;;;;AAgDA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAC;MAAA;MACA;MACA;MACAC;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACA,gBACAC;QAAAD;MAAA,GACAE;QACA;UACA;UACA;QACA;MACA,GACAC;QACA;MACA;IACA;IAEAC;MACA;MACA;IACA;IAEAC;MAAA;MACA;QACA;MACA;QACA;MACA;IACA;EACA;AAEA;AAAA","names":["name","data","taskLists","workContentDialog","recordForm","taskInfo","created","methods","submitOperation","operationArray","post","then","catch","addWorkContent","taskList"],"sourceRoot":"src/views/trace/product","sources":["record.vue"],"sourcesContent":["<template>\r\n\t<div class=\"app-container\">\r\n\t\t<el-divider>待处理工作业务</el-divider>\r\n\t\t<el-table :data=\"taskLists\">\r\n\t\t\t<el-table-column type=\"selection\" width=\"55\" align=\"center\" />\r\n\t\t\t<el-table-column label=\"任务编号\" prop=\"taskId\" />\r\n\t\t\t<el-table-column label=\"任务名称\" prop=\"taskName\" />\r\n\t\t\t<el-table-column label=\"发布人\" prop=\"leaderName\" />\r\n\t\t\t<el-table-column label=\"时间\" prop=\"time\" />\r\n\t\t\t<el-table-column label=\"具体内容\" prop=\"taskRemark\" />\r\n\t\t\t<el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-button size=\"mini\" type=\"text\" @click=\"addWorkContent(scope.row)\">上报工作内容</el-button>\r\n\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t</el-table>\r\n\r\n\t\t<el-dialog center title=\"上报工作详情\" :visible.sync=\"workContentDialog\" width=\"700px\" append-to-body>\r\n\t\t\t<el-form ref=\"form\" label-width=\"80px\" :model=\"recordForm\">\r\n\t\t\t<el-row>\r\n\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"任务ID\" prop=\"nickName\"><el-input :disabled=\"true\" v-model=\"taskInfo.taskId\" placeholder=\"请输入\" /></el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"任务名称\" prop=\"nickName\"><el-input :disabled=\"true\" v-model=\"taskInfo.taskName\" placeholder=\"请输入\" /></el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t</el-row>\r\n\t\t\t<el-row>\r\n\t\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t\t<el-form-item label=\"工作内容\"><el-input type=\"textarea\" v-model=\"recordForm.workContent\" placeholder=\"请输入\" /></el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t</el-row>\r\n\t\t\t<el-row>\r\n\t\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t\t<el-form-item label=\"备注\"><el-input type=\"textarea\" v-model=\"recordForm.remarks\" placeholder=\"请输入\" /></el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t</el-row>\r\n\t\t\t</el-form>\r\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button type=\"primary\" @click=\"submitOperation\">确 定</el-button>\r\n\t\t\t\t<el-button @click=\"cancel\">取 消</el-button>\r\n\t\t\t</div>\r\n\t\t</el-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport {queryTaskList} from '../../../api/trace/product';\r\nimport { formatDate } from '../../../utils/index.js';\r\nexport default {\r\n\tname: 'Record',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\ttaskLists:[],\r\n\t\t\tworkContentDialog:false,\r\n\t\t\trecordForm:{},\r\n\t\t\ttaskInfo:'',\r\n\t\t};\r\n\t},\r\n\tcreated(){\r\n\t\tthis.taskList();\r\n\t},\r\n\tmethods:{\r\n\t\tsubmitOperation(){\r\n\t\t\tconst operationArray = []\r\n\t\t\tconst id = new this.$snowFlakeId().generate()\r\n\t\t\toperationArray.push(id)\r\n\t\t\toperationArray.push(id)\r\n\t\t\toperationArray.push(this.taskInfo.cropsId)\r\n\t\t\toperationArray.push(this.$store.getters.nickName)\r\n\t\t\toperationArray.push(this.$store.getters.phonenumber)\r\n\t\t\toperationArray.push(formatDate(new Date()))\r\n\t\t\toperationArray.push(this.recordForm.workContent)\r\n\t\t\toperationArray.push(this.recordForm.remarks)\r\n\t\t\tthis.$httpBlock\r\n\t\t\t\t.post(this.$httpUrl + '/productapi/createOperation', { operationArray: operationArray })\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tif (res.status === 200) {\r\n\t\t\t\t\t\tthis.msgSuccess(\"数据上链成功\");\r\n\t\t\t\t\t\tthis.workContentDialog = false\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tthis.msgError('存储异常 ' + err);\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\taddWorkContent(row){\r\n\t\t\tthis.taskInfo = row\r\n\t\t\tthis.workContentDialog = true\r\n\t\t},\r\n\r\n\t\ttaskList(){\r\n\t\t\tqueryTaskList().then(res => {\r\n\t\t\t\tthis.taskLists = res.data\r\n\t\t\t}).catch(err => {\r\n\t\t\t\tthis.msgError(\"获取任务失败\")\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n"]}]}