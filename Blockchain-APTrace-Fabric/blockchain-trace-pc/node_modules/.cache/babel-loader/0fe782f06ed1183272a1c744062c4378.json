{"remainingRequest":"E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\node_modules\\babel-loader\\lib\\index.js!E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\src\\views\\trace\\retailer\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\src\\views\\trace\\retailer\\index.vue","mtime":1673353165809},{"path":"E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\babel.config.js","mtime":1673353165524},{"path":"E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJFOi9mb29kL0Jsb2NrY2hhaW4tQVBUcmFjZS1GYWJyaWMvYmxvY2tjaGFpbi10cmFjZS1wYy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQuanMiKS5kZWZhdWx0OwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLXNlYXJjaC1wYXJhbXMuanMiKTsKdmFyIF9kZXB0ID0gcmVxdWlyZSgiQC9hcGkvc3lzdGVtL2RlcHQiKTsKdmFyIF9tYXRlcmlhbCA9IHJlcXVpcmUoIi4uLy4uLy4uL2FwaS90cmFjZS9tYXRlcmlhbCIpOwp2YXIgX3Z1ZVRyZWVzZWxlY3QgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkByaW9waGFlL3Z1ZS10cmVlc2VsZWN0IikpOwpyZXF1aXJlKCJAcmlvcGhhZS92dWUtdHJlZXNlbGVjdC9kaXN0L3Z1ZS10cmVlc2VsZWN0LmNzcyIpOwp2YXIgX2luZGV4ID0gcmVxdWlyZSgiLi4vLi4vLi4vdXRpbHMvaW5kZXguanMiKTsKdmFyIF9mYXJtZXIgPSByZXF1aXJlKCIuLi8uLi8uLi9hcGkvdHJhY2UvZmFybWVyIik7CnZhciBfcHJvZHVjdCA9IHJlcXVpcmUoIi4uLy4uLy4uL2FwaS90cmFjZS9wcm9kdWN0Iik7CnZhciBfcmV0YWlsZXIgPSByZXF1aXJlKCIuLi8uLi8uLi9hcGkvdHJhY2UvcmV0YWlsZXIiKTsKdmFyIF9xcmNvZGVqcyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicXJjb2RlanMyIikpOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwp2YXIgX2RlZmF1bHQgPSB7CiAgbmFtZTogJ0RlcHQnLAogIGNvbXBvbmVudHM6IHsKICAgIFRyZWVzZWxlY3Q6IF92dWVUcmVlc2VsZWN0LmRlZmF1bHQKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpbWFnZVVybDogJycsCiAgICAgIG5vdGljZURldGFpRGlhbG9nOiBmYWxzZSwKICAgICAgLy8g6YGu572p5bGCCiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIC8vIOaYvuekuuaQnOe0ouadoeS7tgogICAgICBzaG93U2VhcmNoOiB0cnVlLAogICAgICAvLyDooajmoLzmoJHmlbDmja4KICAgICAgZGVwdExpc3Q6IFtdLAogICAgICAvLyDpg6jpl6jmoJHpgInpobkKICAgICAgZGVwdE9wdGlvbnM6IFtdLAogICAgICAvLyDlvLnlh7rlsYLmoIfpopgKICAgICAgdGl0bGU6ICcnLAogICAgICAvLyDmmK/lkKbmmL7npLrlvLnlh7rlsYIKICAgICAgb3BlbjogZmFsc2UsCiAgICAgIC8vIOeKtuaAgeaVsOaNruWtl+WFuAogICAgICBzdGF0dXNPcHRpb25zOiBbXSwKICAgICAgLy8g5p+l6K+i5Y+C5pWwCiAgICAgIHF1ZXJ5UGFyYW1zOiB7CiAgICAgICAgZGVwdE5hbWU6IHVuZGVmaW5lZCwKICAgICAgICBzdGF0dXM6IHVuZGVmaW5lZAogICAgICB9LAogICAgICAvLyDooajljZXlj4LmlbAKICAgICAgZm9ybToge30sCiAgICAgIHRyYW5zcG9ydExpc3Q6IFtdLAogICAgICBjaXR5RGV0YWlsOiAnJywKICAgICAgbG5nOiBOdW1iZXIsCiAgICAgIGxhdDogTnVtYmVyLAogICAgICBpbWdCYXNlNjQ6ICcnLAogICAgICBUZXN0aW5nUGhvdG9Vcmw6ICcnLAogICAgICBjaGVja0luZm86ICcnLAogICAgICBkcml2ZXJMaXN0OiBbXSwKICAgICAgbm90aWNlVHJhbnNwb3J0RGlhbG9nOiBmYWxzZSwKICAgICAgdHJhc3BvcnRGb3JtOiB7fSwKICAgICAgZmFjdG9yeUxpc3Q6IFtdLAogICAgICB0cmFjZUlkRGlhbG9nOiBmYWxzZSwKICAgICAgcmV0YWlsZXJJbmZvOiAnJwogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldExpc3QoKTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICAvL3RoaXMucXJjb2RlKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+eUn+aIkOS6p+WTgea6r+a6kOeggQogICAgZ2VuZXJhdGVRckNvZGU6IGZ1bmN0aW9uIGdlbmVyYXRlUXJDb2RlKHByb2R1Y3RJbmZvKSB7CiAgICAgIHZhciBxcmNvZGUgPSBuZXcgUVJDb2RlKCdxcmNvZGUnLCB7CiAgICAgICAgd2lkdGg6IDEzMiwKICAgICAgICBoZWlnaHQ6IDEzMiwKICAgICAgICB0ZXh0OiAnaHR0cDovLzEuMTE3LjIwOC4xOTM6MTIwMTEvIy9sb2dpbj9yZWRpcmVjdD0lMkZpbmRleCcsCiAgICAgICAgLy8g6ZyA6KaB5LqM57u056CB6Lez6L2s55qE5Zyw5Z2ACiAgICAgICAgY29sb3JEYXJrOiAieWVsbG93IiwKICAgICAgICAvL+WJjeaZr+iJsgogICAgICAgIGNvbG9yTGlnaHQ6ICJncmVlbiIgLy/og4zmma/oibIKICAgICAgfSk7CiAgICB9LAogICAgLy/ojrflj5bkuqflk4Hmuq/mupBJRAogICAgZ2V0VHJhY2VJZDogZnVuY3Rpb24gZ2V0VHJhY2VJZChyb3cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIHJldGFpbGVyQXJyYXkgPSBbXTsKICAgICAgcmV0YWlsZXJBcnJheS5wdXNoKHJvdy5jcm9wc0lkKTsKICAgICAgcmV0YWlsZXJBcnJheS5wdXNoKHRoaXMuJHN0b3JlLmdldHRlcnMubmFtZSk7CiAgICAgIHRoaXMuJGh0dHBCbG9jay5nZXQodGhpcy4kaHR0cFVybCArICcvcmV0YWlsZXJhcGkvcXVlcnlSZXRhaWxlckJ5Q3JvcHNJZD9jcm9wc0lkPScgKyByb3cuY3JvcHNJZCArICcmcmV0YWlsZXJJZD0nICsgdGhpcy4kc3RvcmUuZ2V0dGVycy5uYW1lKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmRhdGEubGVuZ3RoIDwgMSkgewogICAgICAgICAgX3RoaXMubXNnRXJyb3IoIuivt+WFiOetvuaUtuWQjuWGjeiOt+WPliIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy50cmFjZUlkRGlhbG9nID0gdHJ1ZTsKICAgICAgICAgIF90aGlzLnJldGFpbGVySW5mbyA9IHJlcy5kYXRhWzBdLlJlY29yZDsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBfdGhpcy5tc2dFcnJvcign5a2Y5YKo5byC5bi4ICcgKyBlcnIpOwogICAgICB9KTsKICAgIH0sCiAgICAvL+etvuaUtgogICAgcmVjZWl2ZTogZnVuY3Rpb24gcmVjZWl2ZShyb3cpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHZhciByZXRhaWxlckFycmF5ID0gW107CiAgICAgIHZhciBpZCA9IG5ldyB0aGlzLiRzbm93Rmxha2VJZCgpLmdlbmVyYXRlKCk7CiAgICAgIHJldGFpbGVyQXJyYXkucHVzaChpZCk7CiAgICAgIHJldGFpbGVyQXJyYXkucHVzaChpZCk7CiAgICAgIHJldGFpbGVyQXJyYXkucHVzaChyb3cuY3JvcHNJZCk7CiAgICAgIHJldGFpbGVyQXJyYXkucHVzaCh0aGlzLiRzdG9yZS5nZXR0ZXJzLm5pY2tOYW1lKTsKICAgICAgcmV0YWlsZXJBcnJheS5wdXNoKHRoaXMuJHN0b3JlLmdldHRlcnMubmFtZSk7CiAgICAgIHJldGFpbGVyQXJyYXkucHVzaCh0aGlzLiRzdG9yZS5nZXR0ZXJzLnBob25lbnVtYmVyKTsKICAgICAgcmV0YWlsZXJBcnJheS5wdXNoKHRoaXMuJHN0b3JlLmdldHRlcnMuZGVwdE5hbWUpOwogICAgICByZXRhaWxlckFycmF5LnB1c2goJ+mbtuWUruWVhuWUruWNlicpOwogICAgICB0aGlzLiRjb25maXJtKCfmmK/lkKbnoa7orqTnrb7mlLYnICsgcm93LmNyb3BzTmFtZSwgJ+etvuaUticsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi4kaHR0cEJsb2NrLnBvc3QoX3RoaXMyLiRodHRwVXJsICsgJy9yZXRhaWxlcmFwaS9jcmVhdGVSZXRhaWxlcicsIHsKICAgICAgICAgIHJldGFpbGVyQXJyYXk6IHJldGFpbGVyQXJyYXkKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgdmFyIGluZm8gPSB7CiAgICAgICAgICAgICAgY3JvcHNJZDogcm93LmNyb3BzSWQsCiAgICAgICAgICAgICAgZmFjdG9yeUlkOiBfdGhpczIuJHN0b3JlLmdldHRlcnMuZGVwdElkCiAgICAgICAgICAgIH07CiAgICAgICAgICAgICgwLCBfcmV0YWlsZXIudXBkYXRlUmVjZWl2ZVN0YXR1cykoaW5mbykudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgX3RoaXMyLm1zZ1N1Y2Nlc3MoIuetvuaUtuaIkOWKnyIpOwogICAgICAgICAgICAgIF90aGlzMi5nZXRMaXN0KCk7CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICBfdGhpczIubXNnRXJyb3IoIuetvuaUtuWksei0pSIpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICBfdGhpczIubXNnRXJyb3IoJ+WtmOWCqOW8guW4uCAnICsgZXJyKTsKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICBtZXNzYWdlOiAn5Y+W5raIJwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBhZGROb3RpY2VUcmFzcG9ydDogZnVuY3Rpb24gYWRkTm90aWNlVHJhc3BvcnQoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICB0aGlzLnRyYXNwb3J0Rm9ybS5jcm9wc0lkID0gdGhpcy5jaGVja0luZm8uY3JvcHNJZDsKICAgICAgdGhpcy50cmFzcG9ydEZvcm0uZmFybWVyVXNlck5hbWUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLm5hbWU7CiAgICAgIHRoaXMudHJhc3BvcnRGb3JtLmZhcm1lck5pY2tOYW1lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5uaWNrTmFtZTsKICAgICAgdGhpcy50cmFzcG9ydEZvcm0udGltZSA9IG5ldyBEYXRlKCk7CiAgICAgIHRoaXMudHJhc3BvcnRGb3JtLmRyaXZlcklkID0gdGhpcy50cmFzcG9ydEZvcm0udXNlck5hbWU7CiAgICAgIHRoaXMudHJhc3BvcnRGb3JtLnN0YXR1cyA9IDA7CiAgICAgIHRoaXMudHJhc3BvcnRGb3JtLmZhcm1lclRlbCA9IHRoaXMuJHN0b3JlLmdldHRlcnMucGhvbmVudW1iZXI7CiAgICAgIHRoaXMudHJhc3BvcnRGb3JtLmZhcm1lckRlcHQgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmRlcHROYW1lOwogICAgICB0aGlzLnRyYXNwb3J0Rm9ybS5mYWN0b3J5SWQgPSB0aGlzLnRyYXNwb3J0Rm9ybS5kZXB0SWQ7CiAgICAgICgwLCBfbWF0ZXJpYWwuYWRkVHJhbnNwb3J0KSh0aGlzLnRyYXNwb3J0Rm9ybSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMzLm1zZ1N1Y2Nlc3MoJ+iBlOezu+i/kOi+k+aIkOWKnycpOwogICAgICAgIF90aGlzMy5ub3RpY2VEZXRhaURpYWxvZyA9IGZhbHNlOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgX3RoaXMzLm1zZ0Vycm9yKCfogZTns7vov5DovpPlpLHotKXvvIzlj5HnlJ/lvILluLgnKTsKICAgICAgfSk7CiAgICB9LAogICAgbm90aWNlVHJhbnNwb3J0OiBmdW5jdGlvbiBub3RpY2VUcmFuc3BvcnQocm93KSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICB0aGlzLmNoZWNrSW5mbyA9IHJvdzsKICAgICAgdGhpcy5ub3RpY2VEZXRhaURpYWxvZyA9IHRydWU7CiAgICAgICgwLCBfZmFybWVyLmdldEFsbERyaXZlckJ5RGVwdElkKSh0aGlzLiRzdG9yZS5nZXR0ZXJzLmRlcHRJZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXM0LmRyaXZlckxpc3QgPSByZXMuZGF0YTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge30pOwogICAgICAoMCwgX2Zhcm1lci5nZXRGYWN0b3J5QnlEZXB0SWQpKDEyMykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXM0LmZhY3RvcnlMaXN0ID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIC8qKg0KICAgICAqIOWHuuW6kw0KICAgICAqLwogICAgb3V0RmFjdG9yeTogZnVuY3Rpb24gb3V0RmFjdG9yeShyb3cpIHsKICAgICAgdGhpcy5jaGVja0luZm8gPSByb3c7CiAgICAgIHRoaXMub3BlbiA9IHRydWU7CiAgICB9LAogICAgY3JlYXRlTWFjaGluZzogZnVuY3Rpb24gY3JlYXRlTWFjaGluZygpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CiAgICAgIHZhciBjaGVja0luZm9BcnJheSA9IFtdOwogICAgICB2YXIgaWQgPSBuZXcgdGhpcy4kc25vd0ZsYWtlSWQoKS5nZW5lcmF0ZSgpOwogICAgICBjaGVja0luZm9BcnJheS5wdXNoKGlkKTsKICAgICAgY2hlY2tJbmZvQXJyYXkucHVzaChpZCk7CiAgICAgIGNoZWNrSW5mb0FycmF5LnB1c2godGhpcy4kc3RvcmUuZ2V0dGVycy5uaWNrTmFtZSk7CiAgICAgIGNoZWNrSW5mb0FycmF5LnB1c2godGhpcy4kc3RvcmUuZ2V0dGVycy5waG9uZW51bWJlcik7CiAgICAgIGNoZWNrSW5mb0FycmF5LnB1c2godGhpcy4kc3RvcmUuZ2V0dGVycy5kZXB0TmFtZSk7CiAgICAgIGNoZWNrSW5mb0FycmF5LnB1c2godGhpcy5jaGVja0luZm8uY3JvcHNJZCk7CiAgICAgIGNoZWNrSW5mb0FycmF5LnB1c2godGhpcy5mb3JtLnRlc3RpbmdSZXN1bHQpOwogICAgICBjaGVja0luZm9BcnJheS5wdXNoKHRoaXMuY2hlY2tJbmZvLnRpbWUpOwogICAgICBjaGVja0luZm9BcnJheS5wdXNoKCgwLCBfaW5kZXguZm9ybWF0RGF0ZSkobmV3IERhdGUoKSkpOwogICAgICBjaGVja0luZm9BcnJheS5wdXNoKHRoaXMuVGVzdGluZ1Bob3RvVXJsKTsKICAgICAgY2hlY2tJbmZvQXJyYXkucHVzaCh0aGlzLmZvcm0ucmVtYXJrcyk7CiAgICAgIHRoaXMuJGh0dHBCbG9jay5wb3N0KHRoaXMuJGh0dHBVcmwgKyAnL21hdGVyaWFsYXBpL2NyZWF0ZU1hY2hpbmcnLCB7CiAgICAgICAgY2hlY2tJbmZvQXJyYXk6IGNoZWNrSW5mb0FycmF5CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICgwLCBfbWF0ZXJpYWwuY2hhbmdlSW5Ub091dCkoX3RoaXM1LmNoZWNrSW5mby5jcm9wc0lkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgX3RoaXM1Lm1zZ1N1Y2Nlc3MoIuWHuuW6k+aIkOWKnyIpOwogICAgICAgICAgICBfdGhpczUuZ2V0TGlzdCgpOwogICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICBfdGhpczUubXNnRXJyb3IoIuWHuuW6k+Wksei0pSIpOwogICAgICAgICAgfSk7CiAgICAgICAgICBfdGhpczUub3BlbiA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIF90aGlzNS5tc2dFcnJvcign5a2Y5YKo5byC5bi4ICcgKyBlcnIpOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRGaWxlOiBmdW5jdGlvbiBnZXRGaWxlKGZpbGUpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CiAgICAgIHRoaXMuaW1hZ2VVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUucmF3KTsKICAgICAgdGhpcy5nZXRCYXNlNjQoZmlsZS5yYXcpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzNi5pbWdCYXNlNjQgPSByZXM7CiAgICAgICAgdmFyIGRhdGFzID0gewogICAgICAgICAgaW1hZ2VCYXNlNjQ6IF90aGlzNi5pbWdCYXNlNjQKICAgICAgICB9OwogICAgICAgICgwLCBfZmFybWVyLnVwbG9kSW1hZ2VzQmFzZTY0KShkYXRhcykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBfdGhpczYuVGVzdGluZ1Bob3RvVXJsID0gcmVzLm1zZzsKICAgICAgICAgIF90aGlzNi5tc2dTdWNjZXNzKCflm77niYfkuIrkvKDmiJDlip8nKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICBfdGhpczYubXNnRXJyb3IoJ+WbvueJh+S4iuS8oOWksei0pScpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRCYXNlNjQ6IGZ1bmN0aW9uIGdldEJhc2U2NChmaWxlKSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgdmFyIGltZ1Jlc3VsdCA9ICcnOwogICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOwogICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpbWdSZXN1bHQgPSByZWFkZXIucmVzdWx0OwogICAgICAgIH07CiAgICAgICAgcmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgfTsKICAgICAgICByZWFkZXIub25sb2FkZW5kID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgcmVzb2x2ZShpbWdSZXN1bHQpOwogICAgICAgIH07CiAgICAgIH0pOwogICAgfSwKICAgIGdldExpc3Q6IGZ1bmN0aW9uIGdldExpc3QoKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwogICAgICAoMCwgX3Byb2R1Y3QucXVlcnlDcm9wc0xpc3QpKHRoaXMuJHN0b3JlLmdldHRlcnMuZGVwdElkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczcudHJhbnNwb3J0TGlzdCA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICAvKiog6L2s5o2i6YOo6Zeo5pWw5o2u57uT5p6EICovbm9ybWFsaXplcjogZnVuY3Rpb24gbm9ybWFsaXplcihub2RlKSB7CiAgICAgIGlmIChub2RlLmNoaWxkcmVuICYmICFub2RlLmNoaWxkcmVuLmxlbmd0aCkgewogICAgICAgIGRlbGV0ZSBub2RlLmNoaWxkcmVuOwogICAgICB9CiAgICAgIHJldHVybiB7CiAgICAgICAgaWQ6IG5vZGUuZGVwdElkLAogICAgICAgIGxhYmVsOiBub2RlLmRlcHROYW1lLAogICAgICAgIGNoaWxkcmVuOiBub2RlLmNoaWxkcmVuCiAgICAgIH07CiAgICB9LAogICAgLy8g5a2X5YW454q25oCB5a2X5YW457+76K+RCiAgICBzdGF0dXNGb3JtYXQ6IGZ1bmN0aW9uIHN0YXR1c0Zvcm1hdChyb3csIGNvbHVtbikgewogICAgICByZXR1cm4gdGhpcy5zZWxlY3REaWN0TGFiZWwodGhpcy5zdGF0dXNPcHRpb25zLCByb3cuc3RhdHVzKTsKICAgIH0sCiAgICAvLyDlj5bmtojmjInpkq4KICAgIGNhbmNlbDogZnVuY3Rpb24gY2FuY2VsKCkgewogICAgICB0aGlzLm9wZW4gPSBmYWxzZTsKICAgICAgdGhpcy5yZXNldCgpOwogICAgfSwKICAgIC8vIOihqOWNlemHjee9rgogICAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkgewogICAgICB0aGlzLmZvcm0gPSB7CiAgICAgICAgZGVwdElkOiB1bmRlZmluZWQsCiAgICAgICAgcGFyZW50SWQ6IHVuZGVmaW5lZCwKICAgICAgICBkZXB0TmFtZTogdW5kZWZpbmVkLAogICAgICAgIG9yZGVyTnVtOiB1bmRlZmluZWQsCiAgICAgICAgbGVhZGVyOiB1bmRlZmluZWQsCiAgICAgICAgcGhvbmU6IHVuZGVmaW5lZCwKICAgICAgICBlbWFpbDogdW5kZWZpbmVkLAogICAgICAgIHN0YXR1czogJzAnCiAgICAgIH07CiAgICAgIHRoaXMucmVzZXRGb3JtKCdmb3JtJyk7CiAgICB9LAogICAgLyoqIOaQnOe0ouaMiemSruaTjeS9nCAqL2hhbmRsZVF1ZXJ5OiBmdW5jdGlvbiBoYW5kbGVRdWVyeSgpIHsKICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICB9LAogICAgLyoqIOmHjee9ruaMiemSruaTjeS9nCAqL3Jlc2V0UXVlcnk6IGZ1bmN0aW9uIHJlc2V0UXVlcnkoKSB7CiAgICAgIHRoaXMucmVzZXRGb3JtKCdxdWVyeUZvcm0nKTsKICAgICAgdGhpcy5oYW5kbGVRdWVyeSgpOwogICAgfSwKICAgIC8qKiDmlrDlop7mjInpkq7mk43kvZwgKi9oYW5kbGVBZGQ6IGZ1bmN0aW9uIGhhbmRsZUFkZChyb3cpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CiAgICAgIHRoaXMucmVzZXQoKTsKICAgICAgaWYgKHJvdyAhPSB1bmRlZmluZWQpIHsKICAgICAgICB0aGlzLmZvcm0ucGFyZW50SWQgPSByb3cuZGVwdElkOwogICAgICB9CiAgICAgIHRoaXMub3BlbiA9IHRydWU7CiAgICAgIHRoaXMudGl0bGUgPSAn5re75Yqg6YOo6ZeoJzsKICAgICAgKDAsIF9kZXB0Lmxpc3REZXB0KSgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXM4LmRlcHRPcHRpb25zID0gX3RoaXM4LmhhbmRsZVRyZWUocmVzcG9uc2UuZGF0YSwgJ2RlcHRJZCcpOwogICAgICB9KTsKICAgIH0sCiAgICAvKiog5L+u5pS55oyJ6ZKu5pON5L2cICovaGFuZGxlVXBkYXRlOiBmdW5jdGlvbiBoYW5kbGVVcGRhdGUocm93KSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwogICAgICB0aGlzLnJlc2V0KCk7CiAgICAgICgwLCBfZGVwdC5nZXREZXB0KShyb3cuZGVwdElkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzOS5mb3JtID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICBfdGhpczkub3BlbiA9IHRydWU7CiAgICAgICAgX3RoaXM5LnRpdGxlID0gJ+S/ruaUuemDqOmXqCc7CiAgICAgIH0pOwogICAgICAoMCwgX2RlcHQubGlzdERlcHRFeGNsdWRlQ2hpbGQpKHJvdy5kZXB0SWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXM5LmRlcHRPcHRpb25zID0gX3RoaXM5LmhhbmRsZVRyZWUocmVzcG9uc2UuZGF0YSwgJ2RlcHRJZCcpOwogICAgICB9KTsKICAgIH0sCiAgICAvKiog5o+Q5Lqk5oyJ6ZKuICovCiAgICBzdWJtaXRGb3JtOiBmdW5jdGlvbiBzdWJtaXRGb3JtKCkgewogICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7CiAgICAgIHRoaXMuJHJlZnNbJ2Zvcm0nXS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGlmIChfdGhpczEwLmZvcm0uZGVwdElkICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICAoMCwgX2RlcHQudXBkYXRlRGVwdCkoX3RoaXMxMC5mb3JtKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgIF90aGlzMTAubXNnU3VjY2Vzcygn5L+u5pS55oiQ5YqfJyk7CiAgICAgICAgICAgICAgICBfdGhpczEwLm9wZW4gPSBmYWxzZTsKICAgICAgICAgICAgICAgIF90aGlzMTAuZ2V0TGlzdCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAoMCwgX2RlcHQuYWRkRGVwdCkoX3RoaXMxMC5mb3JtKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgIF90aGlzMTAubXNnU3VjY2Vzcygn5paw5aKe5oiQ5YqfJyk7CiAgICAgICAgICAgICAgICBfdGhpczEwLm9wZW4gPSBmYWxzZTsKICAgICAgICAgICAgICAgIF90aGlzMTAuZ2V0TGlzdCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvKiog5Yig6Zmk5oyJ6ZKu5pON5L2cICovaGFuZGxlRGVsZXRlOiBmdW5jdGlvbiBoYW5kbGVEZWxldGUocm93KSB7CiAgICAgIHZhciBfdGhpczExID0gdGhpczsKICAgICAgdGhpcy4kY29uZmlybSgn5piv5ZCm56Gu6K6k5Yig6Zmk5ZCN56ew5Li6IicgKyByb3cuZGVwdE5hbWUgKyAnIueahOaVsOaNrumhuT8nLCAn6K2m5ZGKJywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuICgwLCBfZGVwdC5kZWxEZXB0KShyb3cuZGVwdElkKTsKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMxMS5nZXRMaXN0KCk7CiAgICAgICAgX3RoaXMxMS5tc2dTdWNjZXNzKCfliKDpmaTmiJDlip8nKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge30pOwogICAgfQogIH0KfTsKZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7"},{"version":3,"mappings":";;;;;;;;;;;;;;AAwFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA;EACAA;EACAC;IAAAC;EAAA;EACAC;IACA;MACAC;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;QACAC;QACAC;MACA;MACA;MACAC;MAEAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;EACA;EAEAC;IACA;EAAA,CACA;EAEAC;IACA;IACAC;MACA;QACAC;QACAC;QACAC;QAAA;QACAC;QAAA;QACAC;MACA;IACA;IAEA;IACAC;MAAA;MACA;MACAC;MACAA;MACA,gBACAC,8HACAC;QACA;UACA;QACA;UACA;UACA;QACA;MAEA,GACAC;QACA;MACA;IACA;IAEA;IACAC;MAAA;MACA;MACA;MACAJ;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACA;QACAK;QACAC;QACAC;MACA,GACAL;QACA,kBACAM;UAAAR;QAAA,GACAE;UACA;YACA;cACAO;cACAC;YACA;YACA;cACA;cACA;YACA;cACA;YACA;UACA;QACA,GACAP;UACA;QACA;MACA,GACAA;QACA;UACAI;UACAI;QACA;MACA;IACA;IAEAC;MAAA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA,+CACAV;QACA;QACA;MACA,GACAC;QACA;MACA;IACA;IAEAU;MAAA;MACA;MACA;MACA,8DACAX;QACA;MACA,GACAC;MACA,qCACAD;QACA;MACA;IACA;IAEA;AACA;AACA;IACAY;MACA;MACA;IACA;IAEAC;MAAA;MACA;MACA;MACAC;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACA,gBACAR;QAAAQ;MAAA,GACAd;QACA;UACA;YACA;YACA;UACA;YACA;UACA;UACA;QACA;MACA,GACAC;QACA;MACA;IACA;IAEAc;MAAA;MACA;MACA;QACA;QACA;UACAC;QACA;QACA,sCACAhB;UACA;UACA;QACA,GACAC;UACA;QACA;MACA;IACA;IAEAgB;MACA;QACA;QACA;QACAC;QACAA;UACAC;QACA;QACAD;UACAE;QACA;QACAF;UACAG;QACA;MACA;IACA;IAGAC;MAAA;MACA;QACA;MACA;IACA;IACA,eACAC;MACA;QACA;MACA;MACA;QACAC;QACAC;QACAC;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MACA;QACAC;QACAC;QACA3D;QACA4D;QACAC;QACAC;QACAC;QACA9D;MACA;MACA;IACA;IACA,aACA+D;MACA;IACA;IACA,aACAC;MACA;MACA;IACA;IACA,aACAC;MAAA;MACA;MACA;QACA;MACA;MACA;MACA;MACA;QACA;MACA;IACA;IACA,aACAC;MAAA;MACA;MACA;QACA;QACA;QACA;MACA;MACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MACA;QACA;UACA;YACA;cACA;gBACA;gBACA;gBACA;cACA;YACA;UACA;YACA;cACA;gBACA;gBACA;gBACA;cACA;YACA;UACA;QACA;MACA;IACA;IACA,aACAC;MAAA;MACA;QACAtC;QACAC;QACAC;MACA,GACAL;QACA;MACA,GACAA;QACA;QACA;MACA,GACAC;IACA;EACA;AACA;AAAA","names":["name","components","Treeselect","data","imageUrl","noticeDetaiDialog","loading","showSearch","deptList","deptOptions","title","open","statusOptions","queryParams","deptName","status","form","transportList","cityDetail","lng","lat","imgBase64","TestingPhotoUrl","checkInfo","driverList","noticeTransportDialog","trasportForm","factoryList","traceIdDialog","retailerInfo","created","mounted","methods","generateQrCode","width","height","text","colorDark","colorLight","getTraceId","retailerArray","get","then","catch","receive","confirmButtonText","cancelButtonText","type","post","cropsId","factoryId","message","addNoticeTrasport","noticeTransport","outFactory","createMaching","checkInfoArray","getFile","imageBase64","getBase64","reader","imgResult","reject","resolve","getList","normalizer","id","label","children","statusFormat","cancel","reset","deptId","parentId","orderNum","leader","phone","email","handleQuery","resetQuery","handleAdd","handleUpdate","submitForm","handleDelete"],"sourceRoot":"src/views/trace/retailer","sources":["index.vue"],"sourcesContent":["<template>\r\n\t<div class=\"app-container\">\r\n\t\t<el-divider>待处理业务</el-divider>\r\n\t\t<br />\r\n\t\t<el-table :data=\"transportList\">\r\n\t\t\t<el-table-column type=\"selection\" width=\"55\" align=\"center\" />\r\n\t\t\t<el-table-column label=\"产品编号\" prop=\"cropsId\" />\r\n\t\t\t<el-table-column label=\"产品名称\" prop=\"cropsName\" />\r\n\t\t\t<el-table-column label=\"产品来源\" prop=\"farmerDept\" />\r\n\t\t\t<el-table-column label=\"时间\" prop=\"time\" />\r\n\t\t\t<el-table-column label=\"签收状态\" prop=\"retailerReceiveStatus\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-tag v-show=\"scope.row.retailerReceiveStatus === null\">未签收</el-tag>\r\n\t\t\t\t\t<el-tag v-show=\"scope.row.retailerReceiveStatus === 1\">已签收</el-tag>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-button v-show=\"scope.row.retailerReceiveStatus === null\" size=\"mini\" type=\"text\" @click=\"receive(scope.row)\">签收</el-button>\r\n\t\t\t\t\t<el-button size=\"mini\" type=\"text\" @click=\"generateQrCode(scope.row)\">生成溯源码</el-button>\r\n\t\t\t\t\t<el-button size=\"mini\" type=\"text\" @click=\"getTraceId(scope.row)\">获取产品溯源ID</el-button>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t</el-table>\r\n\r\n\r\n\t\t<el-dialog :title=\"title\" :visible.sync=\"open\" width=\"700px\" append-to-body>\r\n\t\t\t<el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\r\n\t\t\t\t<el-row>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"检测结果\" prop=\"nickName\"><el-input v-model=\"form.testingResult\" placeholder=\"请输入检测结果\" /></el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\t\t\t\t<el-form-item label=\"备注\"><el-input v-model=\"form.remarks\" type=\"textarea\" placeholder=\"请输入内容\"></el-input></el-form-item>\r\n\t\t\t\t<el-row>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"检测图片:\">\r\n\t\t\t\t\t\t\t<el-upload class=\"avatar-uploader\" :on-change=\"getFile\" :show-file-list=\"false\" :auto-upload=\"false\">\r\n\t\t\t\t\t\t\t\t<img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\" />\r\n\t\t\t\t\t\t\t\t<i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n\t\t\t\t\t\t\t</el-upload>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\r\n\t\t\t</el-form>\r\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button type=\"primary\" @click=\"createMaching\">确 定</el-button>\r\n\t\t\t\t<el-button @click=\"cancel\">取 消</el-button>\r\n\t\t\t</div>\r\n\t\t</el-dialog>\r\n\r\n\t\t<el-dialog center title=\"联系运输\" :visible.sync=\"noticeDetaiDialog\" width=\"500px\" append-to-body>\r\n\t\t\t<el-form ref=\"form\" :model=\"trasportForm\" label-width=\"80px\">\r\n\t\t\t\t<el-row>\r\n\t\t\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t\t\t<el-form-item label=\"选择司机\" prop=\"nickName\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"trasportForm.userName\" placeholder=\"请选择\">\r\n\t\t\t\t\t\t\t\t<el-option v-for=\"user in driverList\" :key=\"user.userName\" :label=\"user.nickName\" :value=\"user.userName\"></el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\t\t\t\t<el-row>\r\n\t\t\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t\t\t<el-form-item label=\"生产厂商\" prop=\"nickName\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"trasportForm.deptId\" placeholder=\"请选择\">\r\n\t\t\t\t\t\t\t\t<el-option v-for=\"dept in factoryList\" :key=\"dept.deptId\" :label=\"dept.deptName\" :value=\"dept.deptId\"></el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\t\t\t\t<el-form-item label=\"备注\"><el-input v-model=\"trasportForm.remarks\" type=\"textarea\" placeholder=\"请输入内容\"></el-input></el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button type=\"primary\" @click=\"addNoticeTrasport\">确 定</el-button>\r\n\t\t\t\t<el-button @click=\"cancel\">取 消</el-button>\r\n\t\t\t</div>\r\n\t\t</el-dialog>\r\n\r\n\t\t<el-dialog center title=\"产品溯源ID\" :visible.sync=\"traceIdDialog\" width=\"500px\" append-to-body>\r\n\t\t\t<json-viewer :value=\"retailerInfo.product_id\" expand-depth=5 copyable boxed></json-viewer>\r\n\t\t</el-dialog>\r\n\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { listDept, getDept, delDept, addDept, updateDept, listDeptExcludeChild } from '@/api/system/dept';\r\nimport {addTransport, listCrops,changeInToOut} from '../../../api/trace/material';\r\nimport Treeselect from '@riophae/vue-treeselect';\r\nimport '@riophae/vue-treeselect/dist/vue-treeselect.css';\r\nimport { formatDate } from '../../../utils/index.js';\r\nimport {uplodImagesBase64,getAllDriverByDeptId,getFactoryByDeptId} from '../../../api/trace/farmer';\r\nimport {queryCropsList } from '../../../api/trace/product';\r\nimport {updateReceiveStatus } from '../../../api/trace/retailer';\r\nimport QrCode from 'qrcodejs2'\r\nexport default {\r\n\tname: 'Dept',\r\n\tcomponents: { Treeselect },\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\timageUrl:'',\r\n\t\t\tnoticeDetaiDialog: false,\r\n\t\t\t// 遮罩层\r\n\t\t\tloading: true,\r\n\t\t\t// 显示搜索条件\r\n\t\t\tshowSearch: true,\r\n\t\t\t// 表格树数据\r\n\t\t\tdeptList: [],\r\n\t\t\t// 部门树选项\r\n\t\t\tdeptOptions: [],\r\n\t\t\t// 弹出层标题\r\n\t\t\ttitle: '',\r\n\t\t\t// 是否显示弹出层\r\n\t\t\topen: false,\r\n\t\t\t// 状态数据字典\r\n\t\t\tstatusOptions: [],\r\n\t\t\t// 查询参数\r\n\t\t\tqueryParams: {\r\n\t\t\t\tdeptName: undefined,\r\n\t\t\t\tstatus: undefined\r\n\t\t\t},\r\n\t\t\t// 表单参数\r\n\t\t\tform: {},\r\n\r\n\t\t\ttransportList: [],\r\n\t\t\tcityDetail: '',\r\n\t\t\tlng: Number,\r\n\t\t\tlat: Number,\r\n\t\t\timgBase64:'',\r\n\t\t\tTestingPhotoUrl:'',\r\n\t\t\tcheckInfo:'',\r\n\t\t\tdriverList:[],\r\n\t\t\tnoticeTransportDialog:false,\r\n\t\t\ttrasportForm:{},\r\n\t\t\tfactoryList:[],\r\n\t\t\ttraceIdDialog:false,\r\n\t\t\tretailerInfo:''\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tthis.getList();\r\n\t},\r\n\r\n\tmounted() {\r\n\t\t//this.qrcode();\r\n\t},\r\n\r\n\tmethods: {\r\n\t  //生成产品溯源码\r\n    generateQrCode(productInfo){\r\n      let qrcode = new QRCode('qrcode', {\r\n        width: 132,\r\n        height: 132,\r\n        text: 'http://1.117.208.193:12011/#/login?redirect=%2Findex', // 需要二维码跳转的地址\r\n        colorDark: \"yellow\", //前景色\r\n        colorLight: \"green\", //背景色\r\n      })\r\n    },\r\n\r\n\t\t//获取产品溯源ID\r\n\t\tgetTraceId(row){\r\n\t\t\tconst retailerArray = []\r\n\t\t\tretailerArray.push(row.cropsId)\r\n\t\t\tretailerArray.push(this.$store.getters.name)\r\n\t\t\tthis.$httpBlock\r\n\t\t\t\t.get(this.$httpUrl + '/retailerapi/queryRetailerByCropsId?cropsId='+row.cropsId+'&retailerId='+this.$store.getters.name)\r\n\t\t\t\t.then(res => {\r\n          if (res.data.length < 1){\r\n            this.msgError(\"请先签收后再获取\");\r\n          }else {\r\n            this.traceIdDialog = true\r\n            this.retailerInfo = res.data[0].Record;\r\n          }\r\n\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tthis.msgError('存储异常 ' + err);\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\t//签收\r\n\t\treceive(row){\r\n\t\t\tconst retailerArray = []\r\n\t\t\tconst id = new this.$snowFlakeId().generate();\r\n\t\t\tretailerArray.push(id)\r\n\t\t\tretailerArray.push(id)\r\n\t\t\tretailerArray.push(row.cropsId)\r\n\t\t\tretailerArray.push(this.$store.getters.nickName)\r\n\t\t\tretailerArray.push(this.$store.getters.name)\r\n\t\t\tretailerArray.push(this.$store.getters.phonenumber)\r\n\t\t\tretailerArray.push(this.$store.getters.deptName)\r\n\t\t\tretailerArray.push('零售商售卖')\r\n\t\t\tthis.$confirm('是否确认签收'+row.cropsName, '签收', {\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis.$httpBlock\r\n\t\t\t\t\t\t.post(this.$httpUrl + '/retailerapi/createRetailer', { retailerArray: retailerArray })\r\n\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\tif (res.status === 200) {\r\n\t\t\t\t\t\t\t\tconst info = {\r\n\t\t\t\t\t\t\t\t\tcropsId:row.cropsId,\r\n\t\t\t\t\t\t\t\t\tfactoryId:this.$store.getters.deptId,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tupdateReceiveStatus(info).then(() => {\r\n\t\t\t\t\t\t\t\t\tthis.msgSuccess(\"签收成功\");\r\n\t\t\t\t\t\t\t\t\tthis.getList();\r\n\t\t\t\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\t\t\t\tthis.msgError(\"签收失败\")\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\t\tthis.msgError('存储异常 ' + err);\r\n\t\t\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\t\tmessage: '取消'\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\taddNoticeTrasport(){\r\n\t\t\tthis.trasportForm.cropsId = this.checkInfo.cropsId;\r\n\t\t\tthis.trasportForm.farmerUserName = this.$store.getters.name;\r\n\t\t\tthis.trasportForm.farmerNickName = this.$store.getters.nickName;\r\n\t\t\tthis.trasportForm.time = new Date();\r\n\t\t\tthis.trasportForm.driverId = this.trasportForm.userName;\r\n\t\t\tthis.trasportForm.status = 0;\r\n\t\t\tthis.trasportForm.farmerTel = this.$store.getters.phonenumber;\r\n\t\t\tthis.trasportForm.farmerDept = this.$store.getters.deptName;\r\n\t\t\tthis.trasportForm.factoryId = this.trasportForm.deptId\r\n\t\t\taddTransport(this.trasportForm)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tthis.msgSuccess('联系运输成功');\r\n\t\t\t\t\tthis.noticeDetaiDialog = false;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tthis.msgError('联系运输失败，发生异常');\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\tnoticeTransport(row){\r\n\t\t\tthis.checkInfo = row;\r\n\t\t\tthis.noticeDetaiDialog = true\r\n\t\t\tgetAllDriverByDeptId(this.$store.getters.deptId)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tthis.driverList = res.data;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {});\r\n\t\t\tgetFactoryByDeptId(123)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tthis.factoryList = res.data;\r\n\t\t\t\t})\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 出库\r\n\t\t */\r\n\t\toutFactory(row){\r\n\t\t\tthis.checkInfo = row;\r\n\t\t\tthis.open = true\r\n\t\t},\r\n\r\n\t\tcreateMaching(){\r\n\t\t    const checkInfoArray = []\r\n\t\t\tconst id = new this.$snowFlakeId().generate();\r\n\t\t\tcheckInfoArray.push(id)\r\n\t\t\tcheckInfoArray.push(id)\r\n\t\t\tcheckInfoArray.push(this.$store.getters.nickName)\r\n\t\t\tcheckInfoArray.push(this.$store.getters.phonenumber);\r\n\t\t\tcheckInfoArray.push(this.$store.getters.deptName);\r\n\t\t\tcheckInfoArray.push(this.checkInfo.cropsId);\r\n\t\t\tcheckInfoArray.push(this.form.testingResult);\r\n\t\t\tcheckInfoArray.push(this.checkInfo.time);\r\n\t\t\tcheckInfoArray.push(formatDate(new Date()));\r\n\t\t\tcheckInfoArray.push(this.TestingPhotoUrl);\r\n\t\t\tcheckInfoArray.push(this.form.remarks);\r\n\t\t\tthis.$httpBlock\r\n\t\t\t\t.post(this.$httpUrl + '/materialapi/createMaching', { checkInfoArray: checkInfoArray })\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tif (res.status === 200) {\r\n\t\t\t\t\t\tchangeInToOut(this.checkInfo.cropsId).then(res => {\r\n\t\t\t\t\t\t\tthis.msgSuccess(\"出库成功\")\r\n\t\t\t\t\t\t\tthis.getList();\r\n\t\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\t\tthis.msgError(\"出库失败\")\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.open = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tthis.msgError('存储异常 ' + err);\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetFile(file) {\r\n\t\t\tthis.imageUrl = URL.createObjectURL(file.raw);\r\n\t\t\tthis.getBase64(file.raw).then(res => {\r\n\t\t\t\tthis.imgBase64 = res;\r\n\t\t\t\tconst datas = {\r\n\t\t\t\t\timageBase64: this.imgBase64\r\n\t\t\t\t};\r\n\t\t\t\tuplodImagesBase64(datas)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tthis.TestingPhotoUrl = res.msg;\r\n\t\t\t\t\t\tthis.msgSuccess('图片上传成功');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tthis.msgError('图片上传失败');\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetBase64(file) {\r\n\t\t\treturn new Promise(function(resolve, reject) {\r\n\t\t\t\tconst reader = new FileReader();\r\n\t\t\t\tlet imgResult = '';\r\n\t\t\t\treader.readAsDataURL(file);\r\n\t\t\t\treader.onload = function() {\r\n\t\t\t\t\timgResult = reader.result;\r\n\t\t\t\t};\r\n\t\t\t\treader.onerror = function(error) {\r\n\t\t\t\t\treject(error);\r\n\t\t\t\t};\r\n\t\t\t\treader.onloadend = function() {\r\n\t\t\t\t\tresolve(imgResult);\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t},\r\n\r\n\r\n\t\tgetList() {\r\n\t\t\tqueryCropsList(this.$store.getters.deptId).then(res => {\r\n\t\t\t\tthis.transportList = res.data;\r\n\t\t\t});\r\n\t\t},\r\n\t\t/** 转换部门数据结构 */\r\n\t\tnormalizer(node) {\r\n\t\t\tif (node.children && !node.children.length) {\r\n\t\t\t\tdelete node.children;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tid: node.deptId,\r\n\t\t\t\tlabel: node.deptName,\r\n\t\t\t\tchildren: node.children\r\n\t\t\t};\r\n\t\t},\r\n\t\t// 字典状态字典翻译\r\n\t\tstatusFormat(row, column) {\r\n\t\t\treturn this.selectDictLabel(this.statusOptions, row.status);\r\n\t\t},\r\n\t\t// 取消按钮\r\n\t\tcancel() {\r\n\t\t\tthis.open = false;\r\n\t\t\tthis.reset();\r\n\t\t},\r\n\t\t// 表单重置\r\n\t\treset() {\r\n\t\t\tthis.form = {\r\n\t\t\t\tdeptId: undefined,\r\n\t\t\t\tparentId: undefined,\r\n\t\t\t\tdeptName: undefined,\r\n\t\t\t\torderNum: undefined,\r\n\t\t\t\tleader: undefined,\r\n\t\t\t\tphone: undefined,\r\n\t\t\t\temail: undefined,\r\n\t\t\t\tstatus: '0'\r\n\t\t\t};\r\n\t\t\tthis.resetForm('form');\r\n\t\t},\r\n\t\t/** 搜索按钮操作 */\r\n\t\thandleQuery() {\r\n\t\t\tthis.getList();\r\n\t\t},\r\n\t\t/** 重置按钮操作 */\r\n\t\tresetQuery() {\r\n\t\t\tthis.resetForm('queryForm');\r\n\t\t\tthis.handleQuery();\r\n\t\t},\r\n\t\t/** 新增按钮操作 */\r\n\t\thandleAdd(row) {\r\n\t\t\tthis.reset();\r\n\t\t\tif (row != undefined) {\r\n\t\t\t\tthis.form.parentId = row.deptId;\r\n\t\t\t}\r\n\t\t\tthis.open = true;\r\n\t\t\tthis.title = '添加部门';\r\n\t\t\tlistDept().then(response => {\r\n\t\t\t\tthis.deptOptions = this.handleTree(response.data, 'deptId');\r\n\t\t\t});\r\n\t\t},\r\n\t\t/** 修改按钮操作 */\r\n\t\thandleUpdate(row) {\r\n\t\t\tthis.reset();\r\n\t\t\tgetDept(row.deptId).then(response => {\r\n\t\t\t\tthis.form = response.data;\r\n\t\t\t\tthis.open = true;\r\n\t\t\t\tthis.title = '修改部门';\r\n\t\t\t});\r\n\t\t\tlistDeptExcludeChild(row.deptId).then(response => {\r\n\t\t\t\tthis.deptOptions = this.handleTree(response.data, 'deptId');\r\n\t\t\t});\r\n\t\t},\r\n\t\t/** 提交按钮 */\r\n\t\tsubmitForm: function() {\r\n\t\t\tthis.$refs['form'].validate(valid => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tif (this.form.deptId != undefined) {\r\n\t\t\t\t\t\tupdateDept(this.form).then(response => {\r\n\t\t\t\t\t\t\tif (response.code === 200) {\r\n\t\t\t\t\t\t\t\tthis.msgSuccess('修改成功');\r\n\t\t\t\t\t\t\t\tthis.open = false;\r\n\t\t\t\t\t\t\t\tthis.getList();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\taddDept(this.form).then(response => {\r\n\t\t\t\t\t\t\tif (response.code === 200) {\r\n\t\t\t\t\t\t\t\tthis.msgSuccess('新增成功');\r\n\t\t\t\t\t\t\t\tthis.open = false;\r\n\t\t\t\t\t\t\t\tthis.getList();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/** 删除按钮操作 */\r\n\t\thandleDelete(row) {\r\n\t\t\tthis.$confirm('是否确认删除名称为\"' + row.deptName + '\"的数据项?', '警告', {\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t})\r\n\t\t\t\t.then(function() {\r\n\t\t\t\t\treturn delDept(row.deptId);\r\n\t\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis.getList();\r\n\t\t\t\t\tthis.msgSuccess('删除成功');\r\n\t\t\t\t})\r\n\t\t\t\t.catch(function() {});\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n<style>\r\n.avatar-uploader .el-upload {\r\n\tborder: 1px dashed #d9d9d9;\r\n\tborder-radius: 6px;\r\n\tcursor: pointer;\r\n\tposition: relative;\r\n\toverflow: hidden;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n\tborder-color: #409eff;\r\n}\r\n.avatar-uploader-icon {\r\n\tfont-size: 28px;\r\n\tcolor: #8c939d;\r\n\twidth: 178px;\r\n\theight: 178px;\r\n\tline-height: 178px;\r\n\ttext-align: center;\r\n}\r\n.avatar {\r\n\twidth: 300px;\r\n\theight: 270px;\r\n\tdisplay: block;\r\n}\r\n\r\n.image {\r\n\twidth: 80%;\r\n\tdisplay: block;\r\n}\r\n</style>\r\n"]}]}