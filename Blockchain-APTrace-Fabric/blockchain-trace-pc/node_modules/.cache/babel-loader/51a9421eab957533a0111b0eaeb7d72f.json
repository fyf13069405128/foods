{"remainingRequest":"E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\node_modules\\babel-loader\\lib\\index.js!E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\src\\views\\trace\\driver\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\src\\views\\trace\\driver\\index.vue","mtime":1673353165802},{"path":"E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\babel.config.js","mtime":1673353165524},{"path":"E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\food\\Blockchain-APTrace-Fabric\\blockchain-trace-pc\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJFOi9mb29kL0Jsb2NrY2hhaW4tQVBUcmFjZS1GYWJyaWMvYmxvY2tjaGFpbi10cmFjZS1wYy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQuanMiKS5kZWZhdWx0OwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiKTsKdmFyIF9kZXB0ID0gcmVxdWlyZSgiQC9hcGkvc3lzdGVtL2RlcHQiKTsKdmFyIF9kcml2ZXIgPSByZXF1aXJlKCIuLi8uLi8uLi9hcGkvdHJhY2UvZHJpdmVyIik7CnZhciBfdnVlVHJlZXNlbGVjdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQHJpb3BoYWUvdnVlLXRyZWVzZWxlY3QiKSk7CnJlcXVpcmUoIkByaW9waGFlL3Z1ZS10cmVlc2VsZWN0L2Rpc3QvdnVlLXRyZWVzZWxlY3QuY3NzIik7CnZhciBfaW5kZXggPSByZXF1aXJlKCIuLi8uLi8uLi91dGlscy9pbmRleC5qcyIpOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwp2YXIgX2RlZmF1bHQgPSB7CiAgbmFtZTogJ0RlcHQnLAogIGNvbXBvbmVudHM6IHsKICAgIFRyZWVzZWxlY3Q6IF92dWVUcmVlc2VsZWN0LmRlZmF1bHQKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBub3RpY2VEZXRhaURpYWxvZzogZmFsc2UsCiAgICAgIC8vIOmBrue9qeWxggogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICAvLyDmmL7npLrmkJzntKLmnaHku7YKICAgICAgc2hvd1NlYXJjaDogdHJ1ZSwKICAgICAgLy8g6KGo5qC85qCR5pWw5o2uCiAgICAgIGRlcHRMaXN0OiBbXSwKICAgICAgLy8g6YOo6Zeo5qCR6YCJ6aG5CiAgICAgIGRlcHRPcHRpb25zOiBbXSwKICAgICAgLy8g5by55Ye65bGC5qCH6aKYCiAgICAgIHRpdGxlOiAnJywKICAgICAgLy8g5piv5ZCm5pi+56S65by55Ye65bGCCiAgICAgIG9wZW46IGZhbHNlLAogICAgICAvLyDnirbmgIHmlbDmja7lrZflhbgKICAgICAgc3RhdHVzT3B0aW9uczogW10sCiAgICAgIC8vIOafpeivouWPguaVsAogICAgICBxdWVyeVBhcmFtczogewogICAgICAgIGRlcHROYW1lOiB1bmRlZmluZWQsCiAgICAgICAgc3RhdHVzOiB1bmRlZmluZWQKICAgICAgfSwKICAgICAgLy8g6KGo5Y2V5Y+C5pWwCiAgICAgIGZvcm06IHt9LAogICAgICB0cmFuc3BvcnRMaXN0OiBbXSwKICAgICAgY2l0eURldGFpbDogJycsCiAgICAgIGxuZzogTnVtYmVyLAogICAgICBsYXQ6IE51bWJlcgogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldExpc3QoKTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICBBTWFwLnBsdWdpbignQU1hcC5HZW9sb2NhdGlvbicsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGdlb2xvY2F0aW9uID0gbmV3IEFNYXAuR2VvbG9jYXRpb24oewogICAgICAgIC8vIOaYr+WQpuS9v+eUqOmrmOeyvuW6puWumuS9je+8jOm7mOiupO+8mnRydWUKICAgICAgICBlbmFibGVIaWdoQWNjdXJhY3k6IHRydWUsCiAgICAgICAgLy8g6K6+572u5a6a5L2N6LaF5pe25pe26Ze077yM6buY6K6k77ya5peg56m35aSnCiAgICAgICAgdGltZW91dDogMTAwMDAsCiAgICAgICAgLy8g5a6a5L2N5oyJ6ZKu55qE5YGc6Z2g5L2N572u55qE5YGP56e76YeP77yM6buY6K6k77yaUGl4ZWwoMTAsIDIwKQogICAgICAgIGJ1dHRvbk9mZnNldDogbmV3IEFNYXAuUGl4ZWwoMTAsIDIwKSwKICAgICAgICAvLyAg5a6a5L2N5oiQ5Yqf5ZCO6LCD5pW05Zyw5Zu+6KeG6YeO6IyD5Zu05L2/5a6a5L2N5L2N572u5Y+K57K+5bqm6IyD5Zu06KeG6YeO5YaF5Y+v6KeB77yM6buY6K6k77yaZmFsc2UKICAgICAgICB6b29tVG9BY2N1cmFjeTogdHJ1ZSwKICAgICAgICAvLyAg5a6a5L2N5oyJ6ZKu55qE5o6S5pS+5L2N572uLCAgUkLooajnpLrlj7PkuIsKICAgICAgICBidXR0b25Qb3NpdGlvbjogJ1JCJwogICAgICB9KTsKICAgICAgZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKCk7CiAgICAgIEFNYXAuZXZlbnQuYWRkTGlzdGVuZXIoZ2VvbG9jYXRpb24sICdjb21wbGV0ZScsIG9uQ29tcGxldGUpOwogICAgICBBTWFwLmV2ZW50LmFkZExpc3RlbmVyKGdlb2xvY2F0aW9uLCAnZXJyb3InLCBvbkVycm9yKTsKICAgICAgZnVuY3Rpb24gb25Db21wbGV0ZShkYXRhKSB7CiAgICAgICAgdGhpcy5jaXR5RGV0YWlsID0gZGF0YS5hZGRyZXNzQ29tcG9uZW50LnByb3ZpbmNlICsgZGF0YS5hZGRyZXNzQ29tcG9uZW50LmNpdHkgKyBkYXRhLmFkZHJlc3NDb21wb25lbnQuZGlzdHJpY3QgKyBkYXRhLmFkZHJlc3NDb21wb25lbnQudG93bnNoaXA7CiAgICAgICAgdGhpcy5sbmcgPSBkYXRhLnBvc2l0aW9uLmxuZzsKICAgICAgICB0aGlzLmxhdCA9IGRhdGEucG9zaXRpb24ubGF0OwogICAgICAgIHZhciBzdHIgPSBbXTsKICAgICAgICBzdHIucHVzaChkYXRhLnBvc2l0aW9uLmxuZyk7CiAgICAgICAgc3RyLnB1c2goZGF0YS5wb3NpdGlvbi5sYXQpOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsbmcnKS5pbm5lckhUTUwgPSBkYXRhLnBvc2l0aW9uLmxuZzsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGF0JykuaW5uZXJIVE1MID0gZGF0YS5wb3NpdGlvbi5sYXQ7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpcCcpLmlubmVySFRNTCA9IHRoaXMuY2l0eURldGFpbDsKICAgICAgfQogICAgICBmdW5jdGlvbiBvbkVycm9yKGRhdGEpIHsKICAgICAgICBjb25zb2xlLmxvZygn5a6a5L2N6ZSZ6K+vICAgJyArIEpTT04uc3RyaW5naWZ5KGRhdGEpKTsKICAgICAgfQogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBpc09rOiBmdW5jdGlvbiBpc09rKHJvdykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgdHJhbnNwb3J0QXJyYXkgPSBbXTsKICAgICAgdmFyIGlkID0gbmV3IHRoaXMuJHNub3dGbGFrZUlkKCkuZ2VuZXJhdGUoKTsKICAgICAgdHJhbnNwb3J0QXJyYXkucHVzaChpZCk7CiAgICAgIHRyYW5zcG9ydEFycmF5LnB1c2goaWQpOwogICAgICB0cmFuc3BvcnRBcnJheS5wdXNoKHRoaXMuJHN0b3JlLmdldHRlcnMubmFtZSk7CiAgICAgIHRyYW5zcG9ydEFycmF5LnB1c2godGhpcy4kc3RvcmUuZ2V0dGVycy5uaWNrTmFtZSk7CiAgICAgIHRyYW5zcG9ydEFycmF5LnB1c2godGhpcy4kc3RvcmUuZ2V0dGVycy5waG9uZW51bWJlcik7CiAgICAgIHRyYW5zcG9ydEFycmF5LnB1c2godGhpcy4kc3RvcmUuZ2V0dGVycy5kZXB0TmFtZSk7CiAgICAgIHRyYW5zcG9ydEFycmF5LnB1c2goKDAsIF9pbmRleC5mb3JtYXREYXRlKShuZXcgRGF0ZSgpKSk7CiAgICAgIHRyYW5zcG9ydEFycmF5LnB1c2goZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpcCcpLmlubmVySFRNTCk7CiAgICAgIHRyYW5zcG9ydEFycmF5LnB1c2gocm93LmNyb3BzSWQpOwogICAgICB0cmFuc3BvcnRBcnJheS5wdXNoKCfnu4jngrnnq5knKTsKICAgICAgdGhpcy4kY29uZmlybSgn5piv5ZCm56Gu6K6k6YWN6YCB5a6M5q+VJywgJ+mFjemAgScsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLiRodHRwQmxvY2sucG9zdChfdGhpcy4kaHR0cFVybCArICcvZHJpdmVyYXBpL2NyZWF0ZVRyYW5zcG9ydCcsIHsKICAgICAgICAgIHRyYW5zcG9ydEFycmF5OiB0cmFuc3BvcnRBcnJheQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICBfdGhpcy5tc2dTdWNjZXNzKCfmlbDmja7kuIrpk77miJDlip8nKTsKICAgICAgICAgICAgX3RoaXMuZ3Jvd0RpYWxvZyA9IGZhbHNlOwogICAgICAgICAgICB2YXIgdHJhbnNwb3J0SW5mbyA9IHsKICAgICAgICAgICAgICBsbmc6IE51bWJlcihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG5nJykuaW5uZXJIVE1MKSwKICAgICAgICAgICAgICBsYXQ6IE51bWJlcihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGF0JykuaW5uZXJIVE1MKSwKICAgICAgICAgICAgICBjcm9wc0lkOiByb3cuY3JvcHNJZCwKICAgICAgICAgICAgICBzdGF0dXM6IDIsCiAgICAgICAgICAgICAgaWQ6IHJvdy5pZCwKICAgICAgICAgICAgICBvdXRGYWN0b3J5U3RhdHVzOiAwCiAgICAgICAgICAgIH07CiAgICAgICAgICAgICgwLCBfZHJpdmVyLnNhdmVBbmRVcGRhdGVUcmFuc3BvcnRJbmZvVG9EYikodHJhbnNwb3J0SW5mbykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgX3RoaXMuZ2V0TGlzdCgpOwogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7fSk7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgX3RoaXMubXNnRXJyb3IoJ+WtmOWCqOW8guW4uCAnICsgZXJyKTsKICAgICAgICB9KTsKICAgICAgICBfdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICBtZXNzYWdlOiAn6YWN6YCB5oiQ5YqfIScKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgIG1lc3NhZ2U6ICflj5bmtognCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIHRyYW5zcG9ydExvY2F0aW9uOiBmdW5jdGlvbiB0cmFuc3BvcnRMb2NhdGlvbihyb3cpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHZhciB0cmFuc3BvcnRBcnJheSA9IFtdOwogICAgICB2YXIgaWQgPSBuZXcgdGhpcy4kc25vd0ZsYWtlSWQoKS5nZW5lcmF0ZSgpOwogICAgICB0cmFuc3BvcnRBcnJheS5wdXNoKGlkKTsKICAgICAgdHJhbnNwb3J0QXJyYXkucHVzaChpZCk7CiAgICAgIHRyYW5zcG9ydEFycmF5LnB1c2godGhpcy4kc3RvcmUuZ2V0dGVycy5uYW1lKTsKICAgICAgdHJhbnNwb3J0QXJyYXkucHVzaCh0aGlzLiRzdG9yZS5nZXR0ZXJzLm5pY2tOYW1lKTsKICAgICAgdHJhbnNwb3J0QXJyYXkucHVzaCh0aGlzLiRzdG9yZS5nZXR0ZXJzLnBob25lbnVtYmVyKTsKICAgICAgdHJhbnNwb3J0QXJyYXkucHVzaCh0aGlzLiRzdG9yZS5nZXR0ZXJzLmRlcHROYW1lKTsKICAgICAgdHJhbnNwb3J0QXJyYXkucHVzaCgoMCwgX2luZGV4LmZvcm1hdERhdGUpKG5ldyBEYXRlKCkpKTsKICAgICAgdHJhbnNwb3J0QXJyYXkucHVzaChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGlwJykuaW5uZXJIVE1MKTsKICAgICAgdHJhbnNwb3J0QXJyYXkucHVzaChyb3cuY3JvcHNJZCk7CiAgICAgIHRyYW5zcG9ydEFycmF5LnB1c2goJ+S4remAlOWumuS9jScpOwogICAgICB0aGlzLiRjb25maXJtKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXAnKS5pbm5lckhUTUwsICflrprkvY0nLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIuJGh0dHBCbG9jay5wb3N0KF90aGlzMi4kaHR0cFVybCArICcvZHJpdmVyYXBpL2NyZWF0ZVRyYW5zcG9ydCcsIHsKICAgICAgICAgIHRyYW5zcG9ydEFycmF5OiB0cmFuc3BvcnRBcnJheQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICBfdGhpczIubXNnU3VjY2Vzcygn5pWw5o2u5LiK6ZO+5oiQ5YqfJyk7CiAgICAgICAgICAgIF90aGlzMi5ncm93RGlhbG9nID0gZmFsc2U7CiAgICAgICAgICAgIHZhciB0cmFuc3BvcnRJbmZvID0gewogICAgICAgICAgICAgIGxuZzogTnVtYmVyKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsbmcnKS5pbm5lckhUTUwpLAogICAgICAgICAgICAgIGxhdDogTnVtYmVyKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYXQnKS5pbm5lckhUTUwpLAogICAgICAgICAgICAgIGNyb3BzSWQ6IHJvdy5jcm9wc0lkLAogICAgICAgICAgICAgIHN0YXR1czogMQogICAgICAgICAgICB9OwogICAgICAgICAgICAoMCwgX2RyaXZlci5zYXZlQW5kVXBkYXRlVHJhbnNwb3J0SW5mb1RvRGIpKHRyYW5zcG9ydEluZm8pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIF90aGlzMi5nZXRMaXN0KCk7CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHt9KTsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICBfdGhpczIubXNnRXJyb3IoJ+WtmOWCqOW8guW4uCAnICsgZXJyKTsKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICBtZXNzYWdlOiAn5Y+W5raI5a6a5L2NJwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvKioNCiAgICAgKiBAcGFyYW0ge09iamVjdH0gcm935byA5aeL6YWN6YCBDQogICAgICovCiAgICBzdGFydFRyYW5zcG9ydDogZnVuY3Rpb24gc3RhcnRUcmFuc3BvcnQocm93KSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICB2YXIgdHJhbnNwb3J0QXJyYXkgPSBbXTsKICAgICAgdmFyIGlkID0gbmV3IHRoaXMuJHNub3dGbGFrZUlkKCkuZ2VuZXJhdGUoKTsKICAgICAgdHJhbnNwb3J0QXJyYXkucHVzaChpZCk7CiAgICAgIHRyYW5zcG9ydEFycmF5LnB1c2goaWQpOwogICAgICB0cmFuc3BvcnRBcnJheS5wdXNoKHRoaXMuJHN0b3JlLmdldHRlcnMubmFtZSk7CiAgICAgIHRyYW5zcG9ydEFycmF5LnB1c2godGhpcy4kc3RvcmUuZ2V0dGVycy5uaWNrTmFtZSk7CiAgICAgIHRyYW5zcG9ydEFycmF5LnB1c2godGhpcy4kc3RvcmUuZ2V0dGVycy5waG9uZW51bWJlcik7CiAgICAgIHRyYW5zcG9ydEFycmF5LnB1c2godGhpcy4kc3RvcmUuZ2V0dGVycy5kZXB0TmFtZSk7CiAgICAgIHRyYW5zcG9ydEFycmF5LnB1c2goKDAsIF9pbmRleC5mb3JtYXREYXRlKShuZXcgRGF0ZSgpKSk7CiAgICAgIHRyYW5zcG9ydEFycmF5LnB1c2goZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpcCcpLmlubmVySFRNTCk7CiAgICAgIHRyYW5zcG9ydEFycmF5LnB1c2gocm93LmNyb3BzSWQpOwogICAgICB0cmFuc3BvcnRBcnJheS5wdXNoKCflp4vlj5HlnLAnKTsKICAgICAgdGhpcy4kY29uZmlybSgn5piv5ZCm5byA5aeL6L+Q6YCB6LSn54mpJywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMy4kaHR0cEJsb2NrLnBvc3QoX3RoaXMzLiRodHRwVXJsICsgJy9kcml2ZXJhcGkvY3JlYXRlVHJhbnNwb3J0JywgewogICAgICAgICAgdHJhbnNwb3J0QXJyYXk6IHRyYW5zcG9ydEFycmF5CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgIF90aGlzMy5tc2dTdWNjZXNzKCfmlbDmja7kuIrpk77miJDlip8nKTsKICAgICAgICAgICAgX3RoaXMzLmdyb3dEaWFsb2cgPSBmYWxzZTsKICAgICAgICAgICAgdmFyIHRyYW5zcG9ydEluZm8gPSB7CiAgICAgICAgICAgICAgbG5nOiBOdW1iZXIoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xuZycpLmlubmVySFRNTCksCiAgICAgICAgICAgICAgbGF0OiBOdW1iZXIoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xhdCcpLmlubmVySFRNTCksCiAgICAgICAgICAgICAgY3JvcHNJZDogcm93LmNyb3BzSWQsCiAgICAgICAgICAgICAgaWQ6IHJvdy5pZCwKICAgICAgICAgICAgICBzdGF0dXM6IDEKICAgICAgICAgICAgfTsKICAgICAgICAgICAgKDAsIF9kcml2ZXIuc2F2ZUFuZFVwZGF0ZVRyYW5zcG9ydEluZm9Ub0RiKSh0cmFuc3BvcnRJbmZvKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICBfdGhpczMuZ2V0TGlzdCgpOwogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7fSk7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgX3RoaXMzLm1zZ0Vycm9yKCflrZjlgqjlvILluLggJyArIGVycik7CiAgICAgICAgfSk7CiAgICAgICAgX3RoaXMzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgIG1lc3NhZ2U6ICflvIDlp4vov5DpgIEhJwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojov5DpgIEnCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGdldExpc3Q6IGZ1bmN0aW9uIGdldExpc3QoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICAoMCwgX2RyaXZlci5saXN0VHJhbnNwb3J0KSh0aGlzLiRzdG9yZS5nZXR0ZXJzLm5hbWUpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzNC50cmFuc3BvcnRMaXN0ID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIC8qKiDovazmjaLpg6jpl6jmlbDmja7nu5PmnoQgKi9ub3JtYWxpemVyOiBmdW5jdGlvbiBub3JtYWxpemVyKG5vZGUpIHsKICAgICAgaWYgKG5vZGUuY2hpbGRyZW4gJiYgIW5vZGUuY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgZGVsZXRlIG5vZGUuY2hpbGRyZW47CiAgICAgIH0KICAgICAgcmV0dXJuIHsKICAgICAgICBpZDogbm9kZS5kZXB0SWQsCiAgICAgICAgbGFiZWw6IG5vZGUuZGVwdE5hbWUsCiAgICAgICAgY2hpbGRyZW46IG5vZGUuY2hpbGRyZW4KICAgICAgfTsKICAgIH0sCiAgICAvLyDlrZflhbjnirbmgIHlrZflhbjnv7vor5EKICAgIHN0YXR1c0Zvcm1hdDogZnVuY3Rpb24gc3RhdHVzRm9ybWF0KHJvdywgY29sdW1uKSB7CiAgICAgIHJldHVybiB0aGlzLnNlbGVjdERpY3RMYWJlbCh0aGlzLnN0YXR1c09wdGlvbnMsIHJvdy5zdGF0dXMpOwogICAgfSwKICAgIC8vIOWPlua2iOaMiemSrgogICAgY2FuY2VsOiBmdW5jdGlvbiBjYW5jZWwoKSB7CiAgICAgIHRoaXMub3BlbiA9IGZhbHNlOwogICAgICB0aGlzLnJlc2V0KCk7CiAgICB9LAogICAgLy8g6KGo5Y2V6YeN572uCiAgICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7CiAgICAgIHRoaXMuZm9ybSA9IHsKICAgICAgICBkZXB0SWQ6IHVuZGVmaW5lZCwKICAgICAgICBwYXJlbnRJZDogdW5kZWZpbmVkLAogICAgICAgIGRlcHROYW1lOiB1bmRlZmluZWQsCiAgICAgICAgb3JkZXJOdW06IHVuZGVmaW5lZCwKICAgICAgICBsZWFkZXI6IHVuZGVmaW5lZCwKICAgICAgICBwaG9uZTogdW5kZWZpbmVkLAogICAgICAgIGVtYWlsOiB1bmRlZmluZWQsCiAgICAgICAgc3RhdHVzOiAnMCcKICAgICAgfTsKICAgICAgdGhpcy5yZXNldEZvcm0oJ2Zvcm0nKTsKICAgIH0sCiAgICAvKiog5pCc57Si5oyJ6ZKu5pON5L2cICovaGFuZGxlUXVlcnk6IGZ1bmN0aW9uIGhhbmRsZVF1ZXJ5KCkgewogICAgICB0aGlzLmdldExpc3QoKTsKICAgIH0sCiAgICAvKiog6YeN572u5oyJ6ZKu5pON5L2cICovcmVzZXRRdWVyeTogZnVuY3Rpb24gcmVzZXRRdWVyeSgpIHsKICAgICAgdGhpcy5yZXNldEZvcm0oJ3F1ZXJ5Rm9ybScpOwogICAgICB0aGlzLmhhbmRsZVF1ZXJ5KCk7CiAgICB9LAogICAgLyoqIOaWsOWinuaMiemSruaTjeS9nCAqL2hhbmRsZUFkZDogZnVuY3Rpb24gaGFuZGxlQWRkKHJvdykgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKICAgICAgdGhpcy5yZXNldCgpOwogICAgICBpZiAocm93ICE9IHVuZGVmaW5lZCkgewogICAgICAgIHRoaXMuZm9ybS5wYXJlbnRJZCA9IHJvdy5kZXB0SWQ7CiAgICAgIH0KICAgICAgdGhpcy5vcGVuID0gdHJ1ZTsKICAgICAgdGhpcy50aXRsZSA9ICfmt7vliqDpg6jpl6gnOwogICAgICAoMCwgX2RlcHQubGlzdERlcHQpKCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczUuZGVwdE9wdGlvbnMgPSBfdGhpczUuaGFuZGxlVHJlZShyZXNwb25zZS5kYXRhLCAnZGVwdElkJyk7CiAgICAgIH0pOwogICAgfSwKICAgIC8qKiDkv67mlLnmjInpkq7mk43kvZwgKi9oYW5kbGVVcGRhdGU6IGZ1bmN0aW9uIGhhbmRsZVVwZGF0ZShyb3cpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CiAgICAgIHRoaXMucmVzZXQoKTsKICAgICAgKDAsIF9kZXB0LmdldERlcHQpKHJvdy5kZXB0SWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXM2LmZvcm0gPSByZXNwb25zZS5kYXRhOwogICAgICAgIF90aGlzNi5vcGVuID0gdHJ1ZTsKICAgICAgICBfdGhpczYudGl0bGUgPSAn5L+u5pS56YOo6ZeoJzsKICAgICAgfSk7CiAgICAgICgwLCBfZGVwdC5saXN0RGVwdEV4Y2x1ZGVDaGlsZCkocm93LmRlcHRJZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczYuZGVwdE9wdGlvbnMgPSBfdGhpczYuaGFuZGxlVHJlZShyZXNwb25zZS5kYXRhLCAnZGVwdElkJyk7CiAgICAgIH0pOwogICAgfSwKICAgIC8qKiDmj5DkuqTmjInpkq4gKi8KICAgIHN1Ym1pdEZvcm06IGZ1bmN0aW9uIHN1Ym1pdEZvcm0oKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwogICAgICB0aGlzLiRyZWZzWydmb3JtJ10udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBpZiAoX3RoaXM3LmZvcm0uZGVwdElkICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICAoMCwgX2RlcHQudXBkYXRlRGVwdCkoX3RoaXM3LmZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgX3RoaXM3Lm1zZ1N1Y2Nlc3MoJ+S/ruaUueaIkOWKnycpOwogICAgICAgICAgICAgICAgX3RoaXM3Lm9wZW4gPSBmYWxzZTsKICAgICAgICAgICAgICAgIF90aGlzNy5nZXRMaXN0KCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICgwLCBfZGVwdC5hZGREZXB0KShfdGhpczcuZm9ybSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICBfdGhpczcubXNnU3VjY2Vzcygn5paw5aKe5oiQ5YqfJyk7CiAgICAgICAgICAgICAgICBfdGhpczcub3BlbiA9IGZhbHNlOwogICAgICAgICAgICAgICAgX3RoaXM3LmdldExpc3QoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLyoqIOWIoOmZpOaMiemSruaTjeS9nCAqL2hhbmRsZURlbGV0ZTogZnVuY3Rpb24gaGFuZGxlRGVsZXRlKHJvdykgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKICAgICAgdGhpcy4kY29uZmlybSgn5piv5ZCm56Gu6K6k5Yig6Zmk5ZCN56ew5Li6IicgKyByb3cuZGVwdE5hbWUgKyAnIueahOaVsOaNrumhuT8nLCAn6K2m5ZGKJywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuICgwLCBfZGVwdC5kZWxEZXB0KShyb3cuZGVwdElkKTsKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM4LmdldExpc3QoKTsKICAgICAgICBfdGhpczgubXNnU3VjY2Vzcygn5Yig6Zmk5oiQ5YqfJyk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHt9KTsKICAgIH0KICB9Cn07CmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0Ow=="},{"version":3,"mappings":";;;;;;;;;;AAoCA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA;EACAA;EACAC;IAAAC;EAAA;EACAC;IACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;QACAC;QACAC;MACA;MACA;MACAC;MAEAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;EACA;EAEAC;IACAC;MACA;QACA;QACAC;QACA;QACAC;QACA;QACAC;QACA;QACAC;QACA;QACAC;MACA;MACAC;MACAN;MACAA;MACA;QACA;QACA;QACA;QACA;QACAO;QACAA;QACAC;QACAA;QACAA;MACA;MACA;QACAC;MACA;IACA;EACA;EAEAC;IACAC;MAAA;MACA;MACA;MACAC;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACA;QACAC;QACAC;QACAC;MACA,GACAC;QACA,iBACAC;UAAAL;QAAA,GACAI;UACA;YACA;YACA;YACA;cACApB;cACAC;cACAqB;cACA1B;cACA2B;cACAC;YACA;YACA,2DACAJ;cACA;YACA,GACAK,sBAEA;UACA;QACA,GACAA;UACA;QACA;QACA;UACAN;UACAO;QACA;MACA,GACAD;QACA;UACAN;UACAO;QACA;MACA;IACA;IAEAC;MAAA;MACA;MACA;MACAX;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACA;QACAC;QACAC;QACAC;MACA,GACAC;QACA,kBACAC;UAAAL;QAAA,GACAI;UACA;YACA;YACA;YACA;cACApB;cACAC;cACAqB;cACA1B;YACA;YACA,2DACAwB;cACA;YACA,GACAK,sBAEA;UACA;QACA,GACAA;UACA;QACA;MAEA,GACAA;QACA;UACAN;UACAO;QACA;MACA;IACA;IACA;AACA;AACA;IACAE;MAAA;MACA;MACA;MACAZ;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACA;QACAC;QACAC;QACAC;MACA,GACAC;QACA,kBACAC;UAAAL;QAAA,GACAI;UACA;YACA;YACA;YACA;cACApB;cACAC;cACAqB;cACAC;cACA3B;YACA;YACA,2DACAwB;cAEA;YACA,GACAK,sBAEA;UACA;QACA,GACAA;UACA;QACA;QACA;UACAN;UACAO;QACA;MACA,GACAD;QACA;UACAN;UACAO;QACA;MACA;IACA;IAEAG;MAAA;MACA;QACA;MACA;IACA;IACA,eACAC;MACA;QACA;MACA;MACA;QACAP;QACAQ;QACAC;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MACA;QACAC;QACAC;QACA1C;QACA2C;QACAC;QACAC;QACAC;QACA7C;MACA;MACA;IACA;IACA,aACA8C;MACA;IACA;IACA,aACAC;MACA;MACA;IACA;IACA,aACAC;MAAA;MACA;MACA;QACA;MACA;MACA;MACA;MACA;QACA;MACA;IACA;IACA,aACAC;MAAA;MACA;MACA;QACA;QACA;QACA;MACA;MACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MACA;QACA;UACA;YACA;cACA;gBACA;gBACA;gBACA;cACA;YACA;UACA;YACA;cACA;gBACA;gBACA;gBACA;cACA;YACA;UACA;QACA;MACA;IACA;IACA,aACAC;MAAA;MACA;QACA9B;QACAC;QACAC;MACA,GACAC;QACA;MACA,GACAA;QACA;QACA;MACA,GACAK;IACA;EACA;AACA;AAAA","names":["name","components","Treeselect","data","noticeDetaiDialog","loading","showSearch","deptList","deptOptions","title","open","statusOptions","queryParams","deptName","status","form","transportList","cityDetail","lng","lat","created","mounted","AMap","enableHighAccuracy","timeout","buttonOffset","zoomToAccuracy","buttonPosition","geolocation","str","document","console","methods","isOk","transportArray","confirmButtonText","cancelButtonText","type","then","post","cropsId","id","outFactoryStatus","catch","message","transportLocation","startTransport","getList","normalizer","label","children","statusFormat","cancel","reset","deptId","parentId","orderNum","leader","phone","email","handleQuery","resetQuery","handleAdd","handleUpdate","submitForm","handleDelete"],"sourceRoot":"src/views/trace/driver","sources":["index.vue"],"sourcesContent":["<template>\r\n\t<div class=\"app-container\">\r\n\t\t<el-divider>待处理业务</el-divider>\r\n\r\n\t\t<br />\r\n\t\t<el-table :data=\"transportList\">\r\n\t\t\t<el-table-column type=\"selection\" width=\"55\" align=\"center\" />\r\n\t\t\t<el-table-column label=\"货物编号\" prop=\"cropsId\" />\r\n\t\t\t<el-table-column label=\"通知人\" prop=\"farmerNickName\" />\r\n\t\t\t<el-table-column label=\"部门\" prop=\"farmerDept\" />\r\n\t\t\t<el-table-column label=\"时间\" prop=\"time\" />\r\n\t\t\t<el-table-column label=\"备注\" prop=\"remarks\" />\r\n\t\t\t<el-table-column label=\"状态\" prop=\"status\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-tag v-if=\"scope.row.status === 0\">未运输</el-tag>\r\n\t\t\t\t\t<el-tag v-if=\"scope.row.status === 1\">运输中</el-tag>\r\n\t\t\t\t\t<el-tag v-if=\"scope.row.status === 2\">运输完成</el-tag>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-button v-show=\"scope.row.status === 0\" size=\"mini\" type=\"text\" @click=\"startTransport(scope.row)\">开始配送</el-button>\r\n\t\t\t\t\t<el-button v-show=\"scope.row.status === 1\" size=\"mini\" type=\"text\" @click=\"transportLocation(scope.row)\">中途定位</el-button>\r\n\t\t\t\t\t<el-button v-show=\"scope.row.status === 1\" size=\"mini\" type=\"text\" @click=\"isOk(scope.row)\">配送完毕</el-button>\r\n<!--\t\t\t\t\t<el-button size=\"mini\" type=\"text\" @click=\"isOk(scope.row)\">物流追踪</el-button>-->\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t</el-table>\r\n\r\n\t\t<div v-show=\"false\" id=\"tip\"></div>\r\n\t\t<div v-show=\"false\" id=\"lng\"></div>\r\n\t\t<div v-show=\"false\" id=\"lat\"></div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { listDept, getDept, delDept, addDept, updateDept, listDeptExcludeChild } from '@/api/system/dept';\r\nimport { listTransport, saveAndUpdateTransportInfoToDb ,updateTransportStatus} from '../../../api/trace/driver';\r\nimport Treeselect from '@riophae/vue-treeselect';\r\nimport '@riophae/vue-treeselect/dist/vue-treeselect.css';\r\nimport { formatDate } from '../../../utils/index.js';\r\nexport default {\r\n\tname: 'Dept',\r\n\tcomponents: { Treeselect },\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tnoticeDetaiDialog: false,\r\n\t\t\t// 遮罩层\r\n\t\t\tloading: true,\r\n\t\t\t// 显示搜索条件\r\n\t\t\tshowSearch: true,\r\n\t\t\t// 表格树数据\r\n\t\t\tdeptList: [],\r\n\t\t\t// 部门树选项\r\n\t\t\tdeptOptions: [],\r\n\t\t\t// 弹出层标题\r\n\t\t\ttitle: '',\r\n\t\t\t// 是否显示弹出层\r\n\t\t\topen: false,\r\n\t\t\t// 状态数据字典\r\n\t\t\tstatusOptions: [],\r\n\t\t\t// 查询参数\r\n\t\t\tqueryParams: {\r\n\t\t\t\tdeptName: undefined,\r\n\t\t\t\tstatus: undefined\r\n\t\t\t},\r\n\t\t\t// 表单参数\r\n\t\t\tform: {},\r\n\r\n\t\t\ttransportList: [],\r\n\t\t\tcityDetail: '',\r\n\t\t\tlng: Number,\r\n\t\t\tlat: Number\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tthis.getList();\r\n\t},\r\n\r\n\tmounted() {\r\n\t\tAMap.plugin('AMap.Geolocation', function() {\r\n\t\t\tvar geolocation = new AMap.Geolocation({\r\n\t\t\t\t// 是否使用高精度定位，默认：true\r\n\t\t\t\tenableHighAccuracy: true,\r\n\t\t\t\t// 设置定位超时时间，默认：无穷大\r\n\t\t\t\ttimeout: 10000,\r\n\t\t\t\t// 定位按钮的停靠位置的偏移量，默认：Pixel(10, 20)\r\n\t\t\t\tbuttonOffset: new AMap.Pixel(10, 20),\r\n\t\t\t\t//  定位成功后调整地图视野范围使定位位置及精度范围视野内可见，默认：false\r\n\t\t\t\tzoomToAccuracy: true,\r\n\t\t\t\t//  定位按钮的排放位置,  RB表示右下\r\n\t\t\t\tbuttonPosition: 'RB'\r\n\t\t\t});\r\n\t\t\tgeolocation.getCurrentPosition();\r\n\t\t\tAMap.event.addListener(geolocation, 'complete', onComplete);\r\n\t\t\tAMap.event.addListener(geolocation, 'error', onError);\r\n\t\t\tfunction onComplete(data) {\r\n\t\t\t\tthis.cityDetail = data.addressComponent.province + data.addressComponent.city + data.addressComponent.district + data.addressComponent.township;\r\n\t\t\t\tthis.lng = data.position.lng;\r\n\t\t\t\tthis.lat = data.position.lat;\r\n\t\t\t\tconst str = [];\r\n\t\t\t\tstr.push(data.position.lng);\r\n\t\t\t\tstr.push(data.position.lat);\r\n\t\t\t\tdocument.getElementById('lng').innerHTML = data.position.lng;\r\n\t\t\t\tdocument.getElementById('lat').innerHTML = data.position.lat;\r\n\t\t\t\tdocument.getElementById('tip').innerHTML = this.cityDetail;\r\n\t\t\t}\r\n\t\t\tfunction onError(data) {\r\n\t\t\t\tconsole.log('定位错误   ' + JSON.stringify(data));\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tisOk(row){\r\n\t\t\tconst transportArray = [];\r\n\t\t\tconst id = new this.$snowFlakeId().generate();\r\n\t\t\ttransportArray.push(id);\r\n\t\t\ttransportArray.push(id);\r\n\t\t\ttransportArray.push(this.$store.getters.name);\r\n\t\t\ttransportArray.push(this.$store.getters.nickName);\r\n\t\t\ttransportArray.push(this.$store.getters.phonenumber);\r\n\t\t\ttransportArray.push(this.$store.getters.deptName);\r\n\t\t\ttransportArray.push(formatDate(new Date()));\r\n\t\t\ttransportArray.push(document.getElementById('tip').innerHTML);\r\n\t\t\ttransportArray.push(row.cropsId);\r\n\t\t\ttransportArray.push('终点站');\r\n\t\t\tthis.$confirm('是否确认配送完毕', '配送', {\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis.$httpBlock\r\n\t\t\t\t\t\t.post(this.$httpUrl + '/driverapi/createTransport', { transportArray: transportArray })\r\n\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\tif (res.status === 200) {\r\n\t\t\t\t\t\t\t\tthis.msgSuccess('数据上链成功');\r\n\t\t\t\t\t\t\t\tthis.growDialog = false;\r\n\t\t\t\t\t\t\t\tconst transportInfo = {\r\n\t\t\t\t\t\t\t\t\tlng: Number(document.getElementById('lng').innerHTML),\r\n\t\t\t\t\t\t\t\t\tlat: Number(document.getElementById('lat').innerHTML),\r\n\t\t\t\t\t\t\t\t\tcropsId: row.cropsId,\r\n\t\t\t\t\t\t\t\t\tstatus: 2,\r\n\t\t\t\t\t\t\t\t\tid: row.id,\r\n\t\t\t\t\t\t\t\t\toutFactoryStatus:0\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tsaveAndUpdateTransportInfoToDb(transportInfo)\r\n\t\t\t\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\t\t\t\tthis.getList();\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.catch(err => {\r\n\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\t\tthis.msgError('存储异常 ' + err);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\tmessage: '配送成功!'\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\t\tmessage: '取消'\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\ttransportLocation(row) {\r\n\t\t\tconst transportArray = [];\r\n\t\t\tconst id = new this.$snowFlakeId().generate();\r\n\t\t\ttransportArray.push(id);\r\n\t\t\ttransportArray.push(id);\r\n\t\t\ttransportArray.push(this.$store.getters.name);\r\n\t\t\ttransportArray.push(this.$store.getters.nickName);\r\n\t\t\ttransportArray.push(this.$store.getters.phonenumber);\r\n\t\t\ttransportArray.push(this.$store.getters.deptName);\r\n\t\t\ttransportArray.push(formatDate(new Date()));\r\n\t\t\ttransportArray.push(document.getElementById('tip').innerHTML);\r\n\t\t\ttransportArray.push(row.cropsId);\r\n\t\t\ttransportArray.push('中途定位');\r\n\t\t\tthis.$confirm(document.getElementById('tip').innerHTML, '定位', {\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis.$httpBlock\r\n\t\t\t\t\t\t.post(this.$httpUrl + '/driverapi/createTransport', { transportArray: transportArray })\r\n\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\tif (res.status === 200) {\r\n\t\t\t\t\t\t\t\tthis.msgSuccess('数据上链成功');\r\n\t\t\t\t\t\t\t\tthis.growDialog = false;\r\n\t\t\t\t\t\t\t\tconst transportInfo = {\r\n\t\t\t\t\t\t\t\t\tlng: Number(document.getElementById('lng').innerHTML),\r\n\t\t\t\t\t\t\t\t\tlat: Number(document.getElementById('lat').innerHTML),\r\n\t\t\t\t\t\t\t\t\tcropsId: row.cropsId,\r\n\t\t\t\t\t\t\t\t\tstatus: 1,\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tsaveAndUpdateTransportInfoToDb(transportInfo)\r\n\t\t\t\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\t\t\t\tthis.getList();\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.catch(err => {\r\n\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\t\tthis.msgError('存储异常 ' + err);\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\t\tmessage: '取消定位'\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * @param {Object} row开始配送\r\n\t\t */\r\n\t\tstartTransport(row) {\r\n\t\t\tconst transportArray = [];\r\n\t\t\tconst id = new this.$snowFlakeId().generate();\r\n\t\t\ttransportArray.push(id);\r\n\t\t\ttransportArray.push(id);\r\n\t\t\ttransportArray.push(this.$store.getters.name);\r\n\t\t\ttransportArray.push(this.$store.getters.nickName);\r\n\t\t\ttransportArray.push(this.$store.getters.phonenumber);\r\n\t\t\ttransportArray.push(this.$store.getters.deptName);\r\n\t\t\ttransportArray.push(formatDate(new Date()));\r\n\t\t\ttransportArray.push(document.getElementById('tip').innerHTML);\r\n\t\t\ttransportArray.push(row.cropsId);\r\n\t\t\ttransportArray.push('始发地');\r\n\t\t\tthis.$confirm('是否开始运送货物', '提示', {\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis.$httpBlock\r\n\t\t\t\t\t\t.post(this.$httpUrl + '/driverapi/createTransport', { transportArray: transportArray })\r\n\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\tif (res.status === 200) {\r\n\t\t\t\t\t\t\t\tthis.msgSuccess('数据上链成功');\r\n\t\t\t\t\t\t\t\tthis.growDialog = false;\r\n\t\t\t\t\t\t\t\tconst transportInfo = {\r\n\t\t\t\t\t\t\t\t\tlng: Number(document.getElementById('lng').innerHTML),\r\n\t\t\t\t\t\t\t\t\tlat: Number(document.getElementById('lat').innerHTML),\r\n\t\t\t\t\t\t\t\t\tcropsId: row.cropsId,\r\n\t\t\t\t\t\t\t\t\tid: row.id,\r\n\t\t\t\t\t\t\t\t\tstatus: 1,\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tsaveAndUpdateTransportInfoToDb(transportInfo)\r\n\t\t\t\t\t\t\t\t\t.then(res => {\r\n\r\n\t\t\t\t\t\t\t\t\t\tthis.getList();\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.catch(err => {\r\n\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\t\tthis.msgError('存储异常 ' + err);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\tmessage: '开始运送!'\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\t\tmessage: '已取消运送'\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetList() {\r\n\t\t\tlistTransport(this.$store.getters.name).then(res => {\r\n\t\t\t\tthis.transportList = res.data;\r\n\t\t\t});\r\n\t\t},\r\n\t\t/** 转换部门数据结构 */\r\n\t\tnormalizer(node) {\r\n\t\t\tif (node.children && !node.children.length) {\r\n\t\t\t\tdelete node.children;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tid: node.deptId,\r\n\t\t\t\tlabel: node.deptName,\r\n\t\t\t\tchildren: node.children\r\n\t\t\t};\r\n\t\t},\r\n\t\t// 字典状态字典翻译\r\n\t\tstatusFormat(row, column) {\r\n\t\t\treturn this.selectDictLabel(this.statusOptions, row.status);\r\n\t\t},\r\n\t\t// 取消按钮\r\n\t\tcancel() {\r\n\t\t\tthis.open = false;\r\n\t\t\tthis.reset();\r\n\t\t},\r\n\t\t// 表单重置\r\n\t\treset() {\r\n\t\t\tthis.form = {\r\n\t\t\t\tdeptId: undefined,\r\n\t\t\t\tparentId: undefined,\r\n\t\t\t\tdeptName: undefined,\r\n\t\t\t\torderNum: undefined,\r\n\t\t\t\tleader: undefined,\r\n\t\t\t\tphone: undefined,\r\n\t\t\t\temail: undefined,\r\n\t\t\t\tstatus: '0'\r\n\t\t\t};\r\n\t\t\tthis.resetForm('form');\r\n\t\t},\r\n\t\t/** 搜索按钮操作 */\r\n\t\thandleQuery() {\r\n\t\t\tthis.getList();\r\n\t\t},\r\n\t\t/** 重置按钮操作 */\r\n\t\tresetQuery() {\r\n\t\t\tthis.resetForm('queryForm');\r\n\t\t\tthis.handleQuery();\r\n\t\t},\r\n\t\t/** 新增按钮操作 */\r\n\t\thandleAdd(row) {\r\n\t\t\tthis.reset();\r\n\t\t\tif (row != undefined) {\r\n\t\t\t\tthis.form.parentId = row.deptId;\r\n\t\t\t}\r\n\t\t\tthis.open = true;\r\n\t\t\tthis.title = '添加部门';\r\n\t\t\tlistDept().then(response => {\r\n\t\t\t\tthis.deptOptions = this.handleTree(response.data, 'deptId');\r\n\t\t\t});\r\n\t\t},\r\n\t\t/** 修改按钮操作 */\r\n\t\thandleUpdate(row) {\r\n\t\t\tthis.reset();\r\n\t\t\tgetDept(row.deptId).then(response => {\r\n\t\t\t\tthis.form = response.data;\r\n\t\t\t\tthis.open = true;\r\n\t\t\t\tthis.title = '修改部门';\r\n\t\t\t});\r\n\t\t\tlistDeptExcludeChild(row.deptId).then(response => {\r\n\t\t\t\tthis.deptOptions = this.handleTree(response.data, 'deptId');\r\n\t\t\t});\r\n\t\t},\r\n\t\t/** 提交按钮 */\r\n\t\tsubmitForm: function() {\r\n\t\t\tthis.$refs['form'].validate(valid => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tif (this.form.deptId != undefined) {\r\n\t\t\t\t\t\tupdateDept(this.form).then(response => {\r\n\t\t\t\t\t\t\tif (response.code === 200) {\r\n\t\t\t\t\t\t\t\tthis.msgSuccess('修改成功');\r\n\t\t\t\t\t\t\t\tthis.open = false;\r\n\t\t\t\t\t\t\t\tthis.getList();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\taddDept(this.form).then(response => {\r\n\t\t\t\t\t\t\tif (response.code === 200) {\r\n\t\t\t\t\t\t\t\tthis.msgSuccess('新增成功');\r\n\t\t\t\t\t\t\t\tthis.open = false;\r\n\t\t\t\t\t\t\t\tthis.getList();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/** 删除按钮操作 */\r\n\t\thandleDelete(row) {\r\n\t\t\tthis.$confirm('是否确认删除名称为\"' + row.deptName + '\"的数据项?', '警告', {\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t})\r\n\t\t\t\t.then(function() {\r\n\t\t\t\t\treturn delDept(row.deptId);\r\n\t\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis.getList();\r\n\t\t\t\t\tthis.msgSuccess('删除成功');\r\n\t\t\t\t})\r\n\t\t\t\t.catch(function() {});\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n"]}]}